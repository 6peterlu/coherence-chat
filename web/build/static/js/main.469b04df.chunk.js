(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{149:function(e,t,n){},150:function(e,t,n){},268:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(38),i=n.n(c),o=(n(149),n(150),n(16)),s=n(10),l=n(6),u=n.n(l),d=n(14),j=n(11),b=n(288),h=n(12),m=n(121),g=new(n(41).a);console.log("production");var x="production"==="production".trim()?"https://coherence-chat.herokuapp.com":"http://localhost:5000",p=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var a,r,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.get("token"),r={Accept:"application/json","Content-Type":"application/json","Access-Control-Allow_Methods":"POST","Access-Control_Allow_Headers":"*","Access-Control-Allow-Origin":"*"},a&&(r.Authorization="Basic "+btoa(a+":unused")),e.next=5,fetch("".concat(x,"/").concat(t),{method:"post",headers:r,body:JSON.stringify(n)});case 5:if(!(c=e.sent).ok){e.next=11;break}return e.next=9,c.text();case 9:return i=e.sent,e.abrupt("return",JSON.parse(i));case 11:return console.log("POST call to /".concat(t," errored with status ").concat(c.status)),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var a,r,c,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(x,"/").concat(t),a+="?".concat(m.stringify(n)),r=g.get("token"),c={Accept:"application/json","Access-Control-Allow-Methods":"GET","Access-Control-Allow-Headers":"*","Access-Control-Allow-Origin":"*"},r&&(c.Authorization="Basic "+btoa(r+":unused")),e.next=7,fetch(a,{method:"get",headers:c});case 7:if(!(i=e.sent).ok){e.next=13;break}return e.next=11,i.text();case 11:return o=e.sent,e.abrupt("return",JSON.parse(o));case 13:return console.log("GET call to /".concat(t," errored with status ").concat(i.status)),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=Object(d.a)(u.a.mark((function e(t,n,a){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("login/new",{phoneNumber:t,secretCode:n,password:a});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("patientData/new",{calendarMonth:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("patientData/new",{phoneNumber:t,calendarMonth:n});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("doseWindow/update/new",{updatedDoseWindow:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("doseWindow/deactivate/new",{doseWindowId:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("user/pause/new");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("user/resume/new");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("user/healthMetrics/set",{metricList:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=n(22);T.a.initialize("G-NHQLEL1ETH");var D=function(e){T.a.event({category:"Churn",action:"Paused service",value:e})},_=n(71),A=n(96),E=n(307),F=n(301),M=n(308),I=n(286),L=n(309),P=n(303),N=n(304),W=n(270),Z=n(302),H=n(289),J=n(291),R=n(292),G=n(293),B=n(294),U=n(295),Y=n(5),Q=(n(260),n(2)),V=function(e){var t=e.value,n=e.onChangeTime,a=r.a.useState(t.hour),c=Object(j.a)(a,2),i=c[0],o=c[1],s=r.a.useState(t.minute),l=Object(j.a)(s,2),u=l[0],d=l[1];return Object(Q.jsxs)(A.a,{direction:"row",children:[Object(Q.jsx)(F.a,{options:[1,2,3,4,5,6,7,8,9,10,11,12],value:i>12?i-12:0===i?12:i,plain:!0,onChange:function(e){var t=e.value,a=i>=12?t+12:t%12;o(a),n({hour:a,minute:u})}}),Object(Q.jsx)(F.a,{options:["00","15","30","45"],value:"".concat(0===u?"0":"").concat(u.toString()),plain:!0,onChange:function(e){var t=e.value;d(parseInt(t)),n({hour:i,minute:parseInt(t)})}}),Object(Q.jsx)(F.a,{options:["AM","PM"],value:i>=12?"PM":"AM",plain:!0,onChange:function(e){var t=e.value,a=i;"AM"===t?i>=12&&(a=i-12,o(i-12)):i<12&&(a=i+12,o(i+12)),n({hour:a,minute:u})}})]})},X=n(139),q=n(287),K=n(138),$=function(e){var t=e.animating,n=Object(X.a)(e,["animating"]);return t?Object(Q.jsx)(W.a,Object(o.a)(Object(o.a)({},n),{},{alignSelf:"center",label:null,disabled:!0,children:Object(Q.jsx)(q.a,{color:Object(K.get)(n,"background.dark",!1)?"#FFF":"brand"})})):Object(Q.jsx)(W.a,Object(o.a)(Object(o.a)({},n),{},{children:n.children}))},ee=function(){var e=Object(b.a)(["token"]),t=Object(j.a)(e,3),n=t[0],a=t[1],c=t[2],i=r.a.useState(null),l=Object(j.a)(i,2),m=l[0],g=l[1],x=r.a.useState(5),p=Object(j.a)(x,2),O=p[0],f=p[1],X=r.a.useState(null),q=Object(j.a)(X,2),K=q[0],ee=q[1],te=r.a.useState(null),ne=Object(j.a)(te,2),ae=ne[0],re=ne[1],ce=r.a.useState(null),ie=Object(j.a)(ce,2),oe=ie[0],se=ie[1],le=r.a.useState(null),ue=Object(j.a)(le,2),de=ue[0],je=ue[1],be=r.a.useState(null),he=Object(j.a)(be,2),me=he[0],ge=he[1],xe=r.a.useState(null),pe=Object(j.a)(xe,2),Oe=pe[0],fe=pe[1],ve=r.a.useState(!1),we=Object(j.a)(ve,2),ye=we[0],ke=we[1],ze=[Y.DateTime.local(2021,4,1),Y.DateTime.local(2021,5,31)],Ce=r.a.useCallback(Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,!ae){e.next=7;break}return e.next=4,w(ae.value,O);case 4:t=e.sent,e.next=10;break;case 7:return e.next=9,v(O);case 9:t=e.sent;case 10:if(null!==t){e.next=14;break}return c("token"),e.abrupt("return");case 14:console.log(t),g(t),ae||(n=t.id,T.a.event({category:"Engagement",action:"Loaded homepage",value:n})),a("token",t.token,{secure:!0}),t.impersonateList&&ee(t.impersonateList.map((function(e){return{label:e[0],value:e[1]}}))),ke(!1);case 20:case"end":return e.stop()}var n}),e)}))),[O,ae,c,a]),Se=r.a.useMemo((function(){return!!n.token&&(null===m||(m.month!==O||(!!ae!==!!m.impersonating||!(!ae||!m.impersonating||m.phoneNumber===ae.value))))}),[O,n.token,ae,m]);r.a.useEffect((function(){console.log("rerendering"),Se&&Ce()}),[Ce,Se]);var Te=r.a.useCallback((function(e){var t=e.date,n=null,a=Y.DateTime.fromJSDate(t),r=a.day;if(null!==m&&m.eventData.length>=r){var c=m.eventData[r-1];a.month===O&&("taken"===c.day_status?n="status-ok":"missed"===c.day_status?n="status-error":"skip"===c.day_status&&(n="status-warning"))}return Object(Q.jsx)(A.a,{align:"center",justify:"center",margin:{vertical:"xsmall"},children:Object(Q.jsx)(A.a,{width:"30px",height:"30px",round:"medium",background:{color:n},align:"center",justify:"center",children:Object(Q.jsx)(E.a,{children:r})})})}),[O,m]),De=r.a.useMemo((function(){var e={weight:"pounds",glucose:"mg/dL","blood pressure":"mm/hg"},t={};if(null!==m)for(var n in m.healthMetricData){var a=m.healthMetricData[n];console.log(a),t[n]="blood pressure"!==n?{datasets:[{data:a.map((function(e){return{x:Y.DateTime.fromHTTP(e.time),y:e.value}})),label:n,fill:!1,backgroundColor:"rgb(255, 99, 132)",borderColor:"rgba(255, 99, 132, 0.2)"}],options:{scales:{x:{type:"time",time:{unit:"day"},grid:{color:["#777"]},ticks:{color:"#FFF"}},y:{grid:{color:["#AAA"]},ticks:{color:"#FFF"},title:{text:e[n],display:!0,color:"#FFF"}}},color:"white",plugins:{legend:{display:!1}},showLine:!0}}:{datasets:[{data:a.map((function(e){return{x:Y.DateTime.fromHTTP(e.time),y:e.value.systolic}})),label:"systolic",fill:!1,backgroundColor:"rgb(255, 99, 132)",borderColor:"rgba(255, 99, 132, 0.2)"},{data:a.map((function(e){return{x:Y.DateTime.fromHTTP(e.time),y:e.value.diastolic}})),label:"diastolic",fill:!1,backgroundColor:"rgb(99, 255, 132)",borderColor:"rgba(99, 255, 132, 0.2)"}],options:{scales:{x:{type:"time",time:{unit:"day"},grid:{color:["#777"]},ticks:{color:"#FFF"}},y:{grid:{color:["#AAA"]},ticks:{color:"#FFF"},title:{text:e[n],display:!0,color:"#FFF"}}},color:"white",plugins:{datalabels:{color:"black"}},showLine:!0}}}return console.log("returned HM data:"),console.log(t),t}),[m]),_e=r.a.useCallback((function(e){return console.log(e),e.label}),[]),Ae=function(e){return e.hour<4?e.plus({days:1}):e},Ee=r.a.useMemo((function(){if(console.log("recomputing"),null===de)return!0;if(null===m)return!0;var e=Ae(Y.DateTime.utc(2021,5,1,de.start_hour,de.start_minute).setZone("local").set({month:5,day:1})),t=Ae(Y.DateTime.utc(2021,5,1,de.end_hour,de.end_minute).setZone("local").set({month:5,day:1}));if(t<e.plus({minutes:30}))return!1;var n,a=Object(s.a)(m.doseWindows);try{for(a.s();!(n=a.n()).done;){var r=n.value;if(r.id!==de.id){var c=Ae(Y.DateTime.utc(2021,5,1,r.start_hour,r.start_minute).setZone("local").set({month:5,day:1})),i=Ae(Y.DateTime.utc(2021,5,1,r.end_hour,r.end_minute).setZone("local").set({month:5,day:1}));if(e<=c&&c<=t)return!1;if(e<=i&&i<=t)return!1}}}catch(o){a.e(o)}finally{a.f()}return!0}),[de,m]),Fe=r.a.useMemo((function(){var e=Y.DateTime.local();return e.hour>4&&e.hour<12?"morning":e.hour>12&&e.hour<18?"afternoon":"evening"}),[]),Me=r.a.useMemo((function(){var e=Y.DateTime.local();return O===e.month?e:e.set({month:O,day:1})}),[O]),Ie=r.a.useMemo((function(){return(e=["\ud83d\udcab","\ud83c\udf08","\ud83c\udf31","\ud83c\udfc6","\ud83d\udcc8","\ud83d\udc8e","\ud83d\udca1","\ud83d\udd06","\ud83d\udd14"])[Math.floor(e.length*Math.random())];var e}),[]),Le=r.a.useCallback((function(){if(null===m)return null;var e=Y.DateTime.utc(2021,5,1,de.start_hour,de.start_minute),t=Y.DateTime.utc(2021,5,1,de.end_hour,de.end_minute);return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(E.a,{size:"small",margin:{bottom:"none"},children:"Start time (earliest time you'll be reminded)"}),Object(Q.jsx)(V,{value:e.setZone("local"),color:"dark-3",onChangeTime:function(e){var t=Y.DateTime.local(2021,5,1,e.hour,e.minute).setZone("UTC");je(Object(o.a)(Object(o.a)({},de),{},{start_hour:t.hour,start_minute:t.minute}))}}),Object(Q.jsx)(E.a,{size:"small",margin:{bottom:"none"},children:"End time (latest time you'll be reminded)"}),Object(Q.jsx)(V,{value:t.setZone("local"),color:"dark-3",onChangeTime:function(e){console.log("changed time to ".concat(JSON.stringify(e)));var t=Y.DateTime.local(2021,5,1,e.hour,e.minute).setZone("UTC");je(Object(o.a)(Object(o.a)({},de),{},{end_hour:t.hour,end_minute:t.minute}))}}),Object(Q.jsx)($,{onClick:Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ke(!0),e.next=3,y(de);case 3:return e.next=5,Ce();case 5:je(null),null===ae&&(t=m.id,T.a.event({category:"Engagement",action:"Submit edited dose window",value:t}));case 7:case"end":return e.stop()}var t}),e)}))),label:Ee?"Update":"Invalid dose window",disabled:!Ee,animating:ye})]})}),[ye,de,ae,Ce,m,Ee]);if(!n.token)return Object(Q.jsx)(h.a,{to:"/login"});return Object(Q.jsxs)(A.a,{children:[null!==K?Object(Q.jsxs)(A.a,{direction:"row",align:"center",gap:"small",pad:{horizontal:"medium"},children:[Object(Q.jsx)(E.a,{children:"Impersonating:"}),Object(Q.jsx)(F.a,{options:K,children:_e,onChange:function(e){var t=e.option;console.log("setting"),re(t)}})]}):null,Object(Q.jsx)(A.a,{align:"center",children:Object(Q.jsxs)(M.a,{size:"small",children:["Good ",Fe,m?", ".concat(m.patientName):"","."]})}),Object(Q.jsx)(A.a,{children:m&&m.takeNow?Object(Q.jsx)(A.a,{align:"center",background:{color:"status-warning",dark:!0},round:"medium",margin:{horizontal:"large"},pad:{vertical:"medium"},animation:{type:"pulse",size:"medium",duration:2e3},children:Object(Q.jsx)(E.a,{alignSelf:"center",margin:{vertical:"none"},children:"Dose to take now!"})}):Object(Q.jsx)(A.a,{align:"center",background:{color:"brand",dark:!0},round:"medium",margin:{horizontal:"large"},children:Object(Q.jsxs)(E.a,{children:["No doses to take right now. ",Ie]})})}),Object(Q.jsx)(A.a,{margin:{vertical:"medium"},pad:{horizontal:"large"},children:Object(Q.jsx)(I.a,{icon:Object(Q.jsx)(H.a,{}),label:"How do I use Coherence?",dropContent:Object(Q.jsxs)(A.a,{pad:{horizontal:"small"},children:[Object(Q.jsx)(E.a,{textAlign:"center",children:"Texting commands"}),Object(Q.jsxs)(L.a,{columns:["xsmall","small"],align:"center",justifyContent:"center",gap:{column:"small"},children:[Object(Q.jsx)(E.a,{size:"small",children:"T, taken"}),Object(Q.jsx)(E.a,{size:"small",children:"Mark your medication as taken at the current time"}),Object(Q.jsx)(E.a,{size:"small",children:"T @ 5:00pm"}),Object(Q.jsx)(E.a,{size:"small",children:"Mark your medication as taken at 5pm"}),Object(Q.jsx)(E.a,{size:"small",children:"S, skip"}),Object(Q.jsx)(E.a,{size:"small",children:"Skip the current dose"}),Object(Q.jsx)(E.a,{size:"small",children:"1"}),Object(Q.jsx)(E.a,{size:"small",children:"Delay the reminder by ten minutes"}),Object(Q.jsx)(E.a,{size:"small",children:"2"}),Object(Q.jsx)(E.a,{size:"small",children:"Delay the reminder by half an hour"}),Object(Q.jsx)(E.a,{size:"small",children:"3"}),Object(Q.jsx)(E.a,{size:"small",children:"Delay the reminder by an hour"}),Object(Q.jsx)(E.a,{size:"small",children:"20, 20 min"}),Object(Q.jsx)(E.a,{size:"small",children:"Delay the reminder by 20 minutes"}),Object(Q.jsx)(E.a,{size:"small",children:"glucose:140, 140 mg/dL"}),Object(Q.jsx)(E.a,{size:"small",children:"Record glucose reading"}),Object(Q.jsx)(E.a,{size:"small",children:"weight:150, 150 pounds, 150 lb"}),Object(Q.jsx)(E.a,{size:"small",children:"Record weight reading"}),Object(Q.jsx)(E.a,{size:"small",children:"120/80, 120 80"}),Object(Q.jsx)(E.a,{size:"small",children:"Record blood pressure reading"}),Object(Q.jsx)(E.a,{size:"small",children:"W, website, site"}),Object(Q.jsx)(E.a,{size:"small",children:"Get the website link sent to you"}),Object(Q.jsx)(E.a,{size:"small",children:"Eating, going for a walk"}),Object(Q.jsx)(E.a,{size:"small",children:"Tell Coherence you're busy with an activity"}),Object(Q.jsx)(E.a,{size:"small",children:"X"}),Object(Q.jsx)(E.a,{size:"small",children:"Report an error"})]})]}),dropAlign:{top:"bottom"}})}),Object(Q.jsxs)(A.a,{pad:"medium",background:{color:"light-3"},children:[Object(Q.jsx)(E.a,{textAlign:"center",margin:{vertical:"none"},fill:!0,children:"Medication history"}),Object(Q.jsx)(P.a,{date:Me.toISO(),fill:!0,onSelect:function(e){var t,n=Y.DateTime.fromISO(e);se(n.day),null===ae&&(t=m.id,T.a.event({category:"Engagement",action:"Viewed day details",value:t}))},showAdjacentDays:!1,bounds:ze.map((function(e){return e.toString()})),children:Te,daysOfWeek:!0,onReference:function(e){f(Y.DateTime.fromISO(e).month),g(Object(o.a)(Object(o.a)({},m),{},{eventData:[]}))},animate:!1})]}),oe&&Object(Q.jsx)(N.a,{onEsc:function(){return se(!1)},onClickOutside:function(){return se(!1)},responsive:!1,children:Object(Q.jsxs)(A.a,{width:"70vw",pad:"large",children:[Object(Q.jsxs)(A.a,{direction:"row",justify:"between",children:[Object(Q.jsxs)(E.a,{size:"large",children:[Y.DateTime.local().set({month:O}).monthLong," ",oe]}),Object(Q.jsx)(W.a,{icon:Object(Q.jsx)(J.a,{}),onClick:function(){return se(!1)}})]}),m.eventData[oe-1].day_status?Object.keys(m.eventData[oe-1].time_of_day).sort((function(e,t){return e===t?0:"morning"===e||"afternoon"===e&&"evening"===t?-1:1})).map((function(e){var t=m.eventData[oe-1].time_of_day[e].length>1;return m.eventData[oe-1].time_of_day[e].map((function(n,a){return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsxs)(E.a,{margin:{bottom:"none"},children:[e," dose",t?" ".concat(a+1):""]},"tod-".concat(e)),Object(Q.jsxs)(A.a,{pad:{left:"medium"},direction:"row",align:"center",justify:"between",children:[Object(Q.jsxs)(E.a,{size:"small",children:[n.type,n.time?" at ".concat(Y.DateTime.fromJSDate(new Date(n.time)).toLocaleString(Y.DateTime.TIME_SIMPLE)):""]},"todStatus-".concat(e)),"taken"===n.type?Object(Q.jsx)(R.a,{color:"status-ok",size:"small"}):null,"skipped"===n.type?Object(Q.jsx)(G.a,{color:"status-warning",size:"small"}):null,"missed"===n.type?Object(Q.jsx)(J.a,{color:"status-error",size:"small"}):null]},"todStatusContainer-".concat(e))]})}))})):Object(Q.jsx)(E.a,{children:"No data for this day."})]})}),Object(Q.jsxs)(A.a,{align:"center",background:"brand",pad:{bottom:"large"},children:[Object(Q.jsx)(E.a,{margin:{bottom:"none"},children:"Health tracking"}),0===Object.keys(De).length?Object(Q.jsx)(E.a,{size:"small",children:"You're not tracking any health metrics yet."}):null,De&&"blood pressure"in De?Object(Q.jsxs)(A.a,{pad:{horizontal:"large"},fill:"horizontal",children:[Object(Q.jsx)(E.a,{size:"small",margin:{bottom:"none"},children:"Blood pressure"}),De["blood pressure"].datasets[0].data.length>0?Object(Q.jsx)(_.a,{data:De["blood pressure"],options:De["blood pressure"].options}):Object(Q.jsx)(E.a,{children:'No blood pressure data recorded yet. Example texts you can send: "120/80", "120 80".'})]}):null,De&&"weight"in De?Object(Q.jsxs)(A.a,{pad:{horizontal:"large"},fill:"horizontal",children:[Object(Q.jsx)(E.a,{size:"small",margin:{bottom:"none"},children:"Weight"}),De.weight.datasets[0].data.length>0?Object(Q.jsx)(_.a,{data:De.weight,options:De.weight.options}):Object(Q.jsx)(E.a,{children:'No weight data recorded yet. Example texts you can send: "weight:150", "150 lb", "150 pounds".'})]}):null,De&&"glucose"in De?Object(Q.jsxs)(A.a,{pad:{horizontal:"large"},fill:"horizontal",children:[Object(Q.jsx)(E.a,{size:"small",margin:{bottom:"none"},children:"Glucose"}),De.glucose.datasets[0].data.length>0?Object(Q.jsx)(_.a,{data:De.glucose,options:De.glucose.options}):Object(Q.jsx)(E.a,{children:'No glucose data recorded yet. Example texts you can send: "glucose:140", "140 mg/dL"'})]}):null,Object(Q.jsx)(W.a,{label:0===Object.keys(De).length?"Start tracking":"Edit tracking",onClick:function(){var e;fe(Object.keys(De)),null===ae&&(e=m.id,T.a.event({category:"Engagement",action:"Start editing health metrics",value:e}))},margin:{top:"medium"}})]}),null!==Oe?Object(Q.jsx)(N.a,{onEsc:function(){return fe(null)},onClickOutside:function(){return fe(null)},responsive:!1,children:Object(Q.jsxs)(A.a,{width:"70vw",pad:"large",children:[Object(Q.jsxs)(A.a,{direction:"row",justify:"between",children:[Object(Q.jsx)(E.a,{size:"large",children:"Choose what you want to track"}),Object(Q.jsx)(W.a,{icon:Object(Q.jsx)(J.a,{}),onClick:function(){return fe(null)}})]}),Object(Q.jsx)(Z.a,{options:["blood pressure","weight","glucose"],value:Oe,onChange:function(e){fe(e.value)}}),Object(Q.jsx)($,{animating:ye,label:"Save changes",margin:{top:"medium"},onClick:Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ke(!0),console.log(Oe),e.next=4,S(Oe);case 4:return e.next=6,Ce();case 6:fe(null),null===ae&&(t=m.id,T.a.event({category:"Engagement",action:"Submit editing health metrics",value:t}));case 8:case"end":return e.stop()}var t}),e)})))})]})}):null,Object(Q.jsxs)(A.a,{align:"center",pad:{vertical:"medium"},margin:{horizontal:"xlarge"},border:"bottom",children:[Object(Q.jsx)(E.a,{textAlign:"center",margin:{vertical:"none"},children:"Dose windows"}),m?m.doseWindows.map((function(e){var t=Y.DateTime.utc(2021,5,1,e.start_hour,e.start_minute),n=Y.DateTime.utc(2021,5,1,e.end_hour,e.end_minute);return Object(Q.jsxs)(L.a,{columns:["small","xsmall","flex"],align:"center",pad:{horizontal:"large"},alignContent:"center",justifyContent:"center",justify:"center",children:[Object(Q.jsxs)(A.a,{direction:"row",align:"center",children:[Object(Q.jsx)(E.a,{children:t.setZone("local").toLocaleString(Y.DateTime.TIME_SIMPLE)}),Object(Q.jsx)(B.a,{}),Object(Q.jsx)(E.a,{children:n.setZone("local").toLocaleString(Y.DateTime.TIME_SIMPLE)})]}),Object(Q.jsx)(W.a,{label:"edit",onClick:function(){var t;je(e),null===ae&&(t=m.id,T.a.event({category:"Engagement",action:"Start editing dose window",value:t}))},size:"small",margin:{horizontal:"none"}}),Object(Q.jsx)(W.a,{onClick:function(){var t;ge(e),null===ae&&(t=m.id,T.a.event({category:"Engagement",action:"Start deleting dose window",value:t}))},label:"delete",size:"small",padding:{horizontal:"none"}})]},"doseWindowContainer-".concat(e.id))})):null,Object(Q.jsx)(W.a,{label:"Add dose window",onClick:function(){var e;je({start_hour:0,start_minute:0,end_hour:0,end_minute:0}),null===ae&&(e=m.id,T.a.event({category:"Engagement",action:"Start adding dose window",value:e}))},icon:Object(Q.jsx)(U.a,{})})]}),de&&Object(Q.jsx)(N.a,{onEsc:function(){return je(null)},onClickOutside:function(){return je(null)},responsive:!1,children:Object(Q.jsxs)(A.a,{width:"90vw",pad:"large",children:[Object(Q.jsxs)(A.a,{direction:"row",justify:"between",children:[Object(Q.jsx)(E.a,{size:"large",children:"Edit dose window"}),Object(Q.jsx)(W.a,{icon:Object(Q.jsx)(J.a,{}),onClick:function(){return je(null)}})]}),Object(Q.jsx)(A.a,{children:Le(de)})]})}),me&&Object(Q.jsx)(N.a,{onEsc:function(){return ge(null)},onClickOutside:function(){return ge(null)},responsive:!1,children:Object(Q.jsxs)(A.a,{width:"90vw",pad:"large",children:[Object(Q.jsxs)(A.a,{direction:"row",justify:"between",children:[Object(Q.jsx)(E.a,{size:"large",children:"Confirm delete dose window"}),Object(Q.jsx)(W.a,{icon:Object(Q.jsx)(J.a,{}),onClick:function(){return ge(null)}})]}),Object(Q.jsxs)(A.a,{align:"center",children:[Object(Q.jsx)(E.a,{margin:{bottom:"none"},children:"You're about to delete the dose window"}),Object(Q.jsxs)(A.a,{direction:"row",align:"center",margin:{bottom:"medium"},children:[Object(Q.jsx)(E.a,{children:Y.DateTime.utc(2021,5,1,me.start_hour,me.start_minute).setZone("local").toLocaleString(Y.DateTime.TIME_SIMPLE)}),Object(Q.jsx)(B.a,{}),Object(Q.jsx)(E.a,{children:Y.DateTime.utc(2021,5,1,me.end_hour,me.end_minute).setZone("local").toLocaleString(Y.DateTime.TIME_SIMPLE)})]}),Object(Q.jsx)($,{onClick:Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ke(!0),e.next=3,k(me.id);case 3:return e.next=5,Ce();case 5:ge(null),null===ae&&(t=m.id,T.a.event({category:"Engagement",action:"Submit deleting dose window",value:t}));case 7:case"end":return e.stop()}var t}),e)}))),label:"Confirm",animating:ye})]})]})}),Object(Q.jsx)(A.a,{align:"center",pad:{vertical:"medium"},children:m?Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(E.a,{textAlign:"center",margin:{vertical:"none"},children:"Pause / resume Coherence"}),Object(Q.jsxs)(E.a,{size:"small",color:"dark-3",children:["Coherence is currently ",m.pausedService?"paused":"active","."]}),Object(Q.jsx)($,{background:m.pausedService?{dark:!0}:null,animating:ye,style:{padding:"10px"},primary:m.pausedService,onClick:Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ke(!0),!m.pausedService){e.next=7;break}return e.next=4,C();case 4:null===ae&&(t=m.id,T.a.event({category:"Growth",action:"Resumed service",value:t})),e.next=10;break;case 7:return e.next=9,z();case 9:null===ae&&D(m.id);case 10:Ce();case 11:case"end":return e.stop()}var t}),e)}))),label:"".concat(m.pausedService?"Resume":"Pause"," Coherence")}),m.pausedService?Object(Q.jsx)(E.a,{size:"small",color:"status-warning",textAlign:"center",children:"While Coherence is paused, we can't respond to any texts you send us, or remind you about your medications."}):null]}):null}),Object(Q.jsxs)(A.a,{align:"center",pad:{vertical:"medium"},margin:{horizontal:"xlarge"},border:"top",children:[Object(Q.jsx)(E.a,{textAlign:"center",margin:{vertical:"none"},children:"Need help with anything?"}),Object(Q.jsx)(E.a,{size:"small",color:"dark-3",children:"Our customer service is just a text away at (650) 667-1146. Reach out any time and we'll get back to you in a few hours!"})]}),Object(Q.jsx)(A.a,{align:"center",pad:{vertical:"medium"},margin:{horizontal:"xlarge"},border:"top",children:Object(Q.jsx)(W.a,{onClick:function(){c("token")},label:"Log out"})})]})},te=n(306),ne=n(296),ae=n(297),re=n(298),ce=n(299),ie=function(){var e=r.a.useState(""),t=Object(j.a)(e,2),n=t[0],a=t[1],c=r.a.useState(""),i=Object(j.a)(c,2),o=i[0],s=i[1],l=r.a.useState(""),m=Object(j.a)(l,2),g=m[0],x=m[1],p=r.a.useState(""),O=Object(j.a)(p,2),v=O[0],w=O[1],y=r.a.useState("phoneNumber"),k=Object(j.a)(y,2),z=k[0],C=k[1],S=Object(b.a)(["token"]),T=Object(j.a)(S,2),D=T[0],_=T[1],F=r.a.useState(!1),I=Object(j.a)(F,2),L=I[0],P=I[1],N=r.a.useCallback(Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(n,o,g);case 2:null===(t=e.sent)?P(!0):("success"===t.status&&(console.log("setting cookie"),_("token",t.token,{secure:!0})),C(t.status),P(!1));case 4:case"end":return e.stop()}}),e)}))),[g,n,o,_]),Z=r.a.useCallback((function(){return"phoneNumber"===z?Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(E.a,{textAlign:"center",size:"small",children:"Enter phone number."}),Object(Q.jsx)(te.a,{icon:Object(Q.jsx)(ne.a,{}),placeholder:"(555) 555-5555",size:"small",value:n,onChange:function(e){a(e.target.value)}}),L?Object(Q.jsx)(E.a,{size:"small",children:"Invalid phone number."}):null]}):"2fa"===z?Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(E.a,{textAlign:"center",size:"small",children:"We've texted you a secret code, enter it below."}),Object(Q.jsx)(te.a,{icon:Object(Q.jsx)(ae.a,{}),placeholder:"123456",size:"small",value:o,onChange:function(e){s(e.target.value)}}),L?Object(Q.jsx)(E.a,{size:"small",children:"Invalid secret code."}):null]}):"password"===z?Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(E.a,{textAlign:"center",size:"small",children:"Enter password."}),Object(Q.jsx)(te.a,{icon:Object(Q.jsx)(re.a,{}),placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",size:"small",value:g,onChange:function(e){x(e.target.value),w(e.target.value)},type:"password"}),L?Object(Q.jsx)(E.a,{size:"small",children:"Invalid password. If you'd like us to reset it, give us a text at (650) 667-1146."}):null]}):"register"===z?Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(E.a,{textAlign:"center",size:"small",children:"Create your password."}),Object(Q.jsx)(te.a,{icon:Object(Q.jsx)(re.a,{}),placeholder:"Enter password",size:"small",value:g,onChange:function(e){x(e.target.value)},type:"password"}),Object(Q.jsx)(te.a,{icon:Object(Q.jsx)(re.a,{}),placeholder:"Type it again",size:"small",value:v,onChange:function(e){w(e.target.value)},type:"password"}),g!==v?Object(Q.jsx)(E.a,{size:"small",children:"Passwords don't match."}):null]}):void 0}),[L,z,g,v,n,o]);return D.token?Object(Q.jsx)(h.a,{to:"/"}):Object(Q.jsxs)(A.a,{height:"100vh",flex:"grow",background:{position:"center",dark:!1,opacity:"strong"},children:[Object(Q.jsxs)(A.a,{height:"40vh",align:"center",justify:"center",pad:"large",children:[Object(Q.jsx)(E.a,{children:"welcome to"}),Object(Q.jsx)(M.a,{children:"coherence"})]}),Object(Q.jsxs)(A.a,{height:"60vh",align:"center",justify:"between",background:{color:"brand",dark:!0},pad:"large",children:[Object(Q.jsx)(E.a,{color:"white",textAlign:"center",children:"Peace of mind with your medications is just around the corner."}),Object(Q.jsxs)(A.a,{children:[Object(Q.jsx)(A.a,{width:"200px",margin:{bottom:"medium",top:"xsmall"},children:Z()}),Object(Q.jsx)(W.a,{label:"submit",icon:Object(Q.jsx)(ce.a,{}),onClick:N,disabled:g!==v})]})]})]})},oe=n(65),se=function(){return Object(Q.jsx)(oe.a,{children:Object(Q.jsxs)(h.d,{children:[Object(Q.jsx)(h.b,{exact:!0,path:"/",render:function(){return Object(Q.jsx)(ee,{})}}),Object(Q.jsx)(h.b,{exact:!0,path:"/login",render:function(){return Object(Q.jsx)(ie,{})}})]})})},le=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,310)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))},ue=n(300),de=n(305);i.a.render(Object(Q.jsx)(r.a.StrictMode,{children:Object(Q.jsx)(ue.a,{children:Object(Q.jsx)(de.a,{theme:{global:{colors:{brand:"#002864",text:{light:"#002864"},paragraph:{light:"#002864"},background:"#FFF"}},spinner:{container:{color:{light:"#002864",dark:"FFF"}}}},themeMode:"light",children:Object(Q.jsx)(se,{})})})}),document.getElementById("root")),le()}},[[268,1,2]]]);
//# sourceMappingURL=main.469b04df.chunk.js.map