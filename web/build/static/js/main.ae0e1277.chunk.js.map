{"version":3,"sources":["api.js","analytics.js","components/TimeInput.js","components/AnimatingButton.js","pages/Home.js","pages/Intro.js","components/StripeCardEntry.js","pages/Payment.js","pages/FinishOnboarding.js","pages/LandingPage.js","App.js","reportWebVitals.js","index.js"],"names":["cookies","Cookies","console","log","process","apiServer","trim","post","route","payload","a","token","get","headers","Accept","Authorization","btoa","fetch","method","body","JSON","stringify","fetchResult","ok","text","parse","status","params","url","qs","login","phoneNumber","secretCode","password","response","pullPatientData","calendarMonth","pullPatientDataForNumber","pullPatientPaymentData","updateDoseWindow","updatedDoseWindow","deleteDoseWindow","dwId","doseWindowId","pauseUser","resumeUser","setHealthMetricsTracking","metricList","submitPaymentInfo","cancelSubscription","renewSubscription","landingPageSignup","name","email","trialCode","ReactGA","initialize","cookieFlags","shouldLogAnalytics","trackPausedService","userId","event","category","action","label","TimeInput","value","onChangeTime","React","useState","hour","setHour","minute","setMinute","Box","direction","Select","options","plain","onChange","newHour","toString","parseInt","AnimatingButton","animating","props","Button","alignSelf","disabled","Spinner","color","children","Home","useCookies","setCookie","removeCookie","patientData","setPatientData","setCalendarMonth","impersonateOptions","setImpersonateOptions","impersonating","setImpersonating","selectedDay","setSelectedDay","editingDoseWindow","setEditingDoseWindow","deletingDoseWindow","setDeletingDoseWindow","editingHealthTracking","setEditingHealthTracking","timeRange","setTimeRange","history","useHistory","setAnimating","dateRange","DateTime","local","loadData","useCallback","loadedData","impersonateList","patientId","secure","map","tuple_data","shouldRerender","useMemo","month","useEffect","renderDay","date","dayColor","dt","fromJSDate","day","eventData","length","dayOfMonthData","day_status","align","justify","margin","vertical","width","height","round","background","Paragraph","formattedHealthMetricData","units","weight","glucose","data","metric","healthMetricData","metric_list","datasets","x","fromHTTP","time","y","fill","backgroundColor","borderColor","scales","type","unit","grid","ticks","min","minus","days","toISODate","title","display","plugins","legend","elements","point","hitRadius","hoverRadius","showLine","systolic","diastolic","datalabels","renderImpersonateListItem","listItem","nextDayConversion","plus","validDoseWindows","editingStartTime","utc","start_hour","start_minute","setZone","set","editingEndTime","end_hour","end_minute","minutes","doseWindows","dw","id","existingStartTime","existingEndTime","currentTimeOfDay","currentTime","dateToDisplay","currentDay","randomHeaderEmoji","arr","Math","floor","random","renderDoseWindowEditFields","startTime","endTime","size","bottom","newTime","newDwTime","onClick","padding","horizontal","top","to","includes","state","gap","pad","option","earlyAdopterStatus","right","Fireball","Heading","patientName","textAlign","subscriptionEndDate","toLocaleString","DATE_MED","push","takeNow","animation","DropButton","icon","CircleInformation","dropContent","Grid","columns","justifyContent","column","dropAlign","Calendar","toISO","onSelect","fromISO","showAdjacentDays","bounds","daysOfWeek","onReference","animate","Layer","onEsc","onClickOutside","responsive","monthLong","Close","Object","keys","time_of_day","sort","t1","t2","key","numberSuffix","index","left","Date","TIME_SIMPLE","Checkmark","Clear","valueLabel","CheckBoxGroup","e","border","alignContent","FormNextLink","Add","pausedService","style","primary","Intro","setPhoneNumber","setSecretCode","setPassword","passwordConfirm","setPasswordConfirm","componentToDisplay","setComponentToDisplay","authError","setAuthError","submitAll","getInputField","TextInput","Phone","placeholder","target","Lock","flex","dark","Login","StripeCardEntry","submitText","clientSecret","afterSubmitAction","payOnSubmit","stripe","useStripe","useElements","validatingCard","setValidatingCard","ready","setReady","submitPayment","cardElement","getElement","CardElement","stripeReturnData","confirmCardPayment","payment_method","card","billing_details","setup_future_usage","confirmCardSetup","onReady","Payment","loading","setLoading","paymentData","setPaymentData","addCardModalVisible","setAddCardModalVisible","stripePromise","loadStripe","publishable_key","secondary_state","client_secret","subscription_end_date","brand","last4","FinishOnboarding","LandingPage","setName","setEmail","freeTrialCode","setFreeTrialCode","submittedForm","setSubmittedForm","href","Image","fit","src","Favorite","Info","toLowerCase","App","exact","path","render","ResponsiveContext","Consumer","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","CookiesProvider","Grommet","theme","global","colors","light","paragraph","breakpoints","xsmall","small","medium","large","xlarge","spinner","container","themeMode","document","getElementById"],"mappings":"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","file":"static/js/main.ae0e1277.chunk.js","sourcesContent":["import * as qs from 'query-string';\nimport Cookies from 'universal-cookie';\n\nconst cookies = new Cookies();\n\nconsole.log(process.env.NODE_ENV);\nconst apiServer = process.env.NODE_ENV.trim() === \"production\" ? \"https://coherence-chat.herokuapp.com\" : 'http://localhost:5000';\n\nconst post = async (route, payload) => {\n  const token = cookies.get('token');\n  const headers = {\n    Accept: 'application/json',\n    'Content-Type': 'application/json',\n    \"Access-Control-Allow_Methods\": \"POST\",\n    \"Access-Control_Allow_Headers\": \"*\",\n    \"Access-Control-Allow-Origin\": \"*\",\n  };\n  if (token) {\n    headers.Authorization = 'Basic ' + btoa(token + \":unused\");\n  }\n  const fetchResult = await fetch(`${apiServer}/${route}`, {\n    method: 'post',\n    headers,\n    body: JSON.stringify(payload),\n  });\n\n  if (fetchResult.ok) {\n    const text = await fetchResult.text();\n    return JSON.parse(text);\n  }\n  console.log(\n    `POST call to /${route} errored with status ${fetchResult.status}`,\n  );\n  return null;\n};\n\nconst get = async (route, params) => {\n  let url = `${apiServer}/${route}`;\n  url += `?${qs.stringify(params)}`;\n\n  const token = cookies.get('token');\n  const headers = {\n    Accept: 'application/json',\n    \"Access-Control-Allow-Methods\": \"GET\",\n    \"Access-Control-Allow-Headers\": \"*\",\n    \"Access-Control-Allow-Origin\": \"*\",\n  };\n  if (token) {\n    headers.Authorization = 'Basic ' + btoa(token + \":unused\");\n  }\n  const fetchResult = await fetch(url, {\n    method: 'get',\n    headers,\n  });\n  if (fetchResult.ok) {\n    const text = await fetchResult.text();\n    console.log(text);\n    return JSON.parse(text);\n  }\n  console.log(\n    `GET call to /${route} errored with status ${fetchResult.status}`,\n  );\n  return null;\n};\n\nexport const login = async (phoneNumber, secretCode, password) => {\n    const response = await post(\"login/new\", { phoneNumber, secretCode, password });\n    return response;\n}\n\nexport const pullPatientData = async (calendarMonth) => {\n  const response = await get(\"patientData/new\", { calendarMonth });\n  return response;\n}\n\nexport const pullPatientDataForNumber = async (phoneNumber, calendarMonth) => {\n  const response = await get(\"patientData/new\", { phoneNumber, calendarMonth });\n  return response;\n}\n\nexport const pullPatientPaymentData = async () => {\n  console.log(\"calling this at least?\")\n  const response = await get(\"user/getPaymentData\", {});\n  return response;\n}\n\nexport const updateDoseWindow = async (updatedDoseWindow) => {\n  const response = await post(\"doseWindow/update/new\", { updatedDoseWindow });\n  return response;\n}\n\nexport const deleteDoseWindow = async (dwId) => {\n  const response = await post(\"doseWindow/deactivate/new\", { doseWindowId: dwId });\n  return response;\n}\n\nexport const pauseUser = async () => {\n  const response = await post(\"user/pause/new\");\n  return response;\n}\n\nexport const resumeUser = async () => {\n  const response = await post(\"user/resume/new\");\n  return response;\n}\n\nexport const setHealthMetricsTracking = async (metricList) => {\n  const response = await post(\"user/healthMetrics/set\", { metricList });\n  return response;\n}\n\nexport const submitPaymentInfo = async () => {\n  const response = await post(\"user/submitPaymentInfo\", {});\n  return response;\n}\n\nexport const cancelSubscription = async () => {\n  console.log(\"attempting to cancel sub\");\n  const response = await post(\"user/cancelSubscription\", {});\n  return response;\n}\n\nexport const renewSubscription = async () => {\n  const response = await post(\"user/renewSubscription\", {});\n  return response;\n}\n\nexport const landingPageSignup = async (name, email, phoneNumber, trialCode) => {\n  const response = await post(\"user/landingPageSignup\", {\n    name, email, phoneNumber, trialCode\n  });\n  return response;\n}","import ReactGA from 'react-ga';\n\nReactGA.initialize('UA-196778289-2', {cookieFlags: 'max-age=7200;SameSite=None;Secure'});\n\nconst shouldLogAnalytics = process.env.NODE_ENV.trim() === \"production\";\n\nexport const trackPatientPortalLoad = (userId) => {\n    if (shouldLogAnalytics) {\n        ReactGA.event({\n            category: \"Engagement\",\n            action: \"Loaded homepage\",\n            label: userId\n        });\n    }\n}\n\nexport const trackViewedDayDetails = (userId) => {\n    if (shouldLogAnalytics) {\n        ReactGA.event({\n            category: \"Engagement\",\n            action: \"Viewed day details\",\n            label: userId\n        });\n    }\n}\n\nexport const trackStartAddingDoseWindow = (userId) => {\n    if (shouldLogAnalytics) {\n        ReactGA.event({\n            category: \"Engagement\",\n            action: \"Start adding dose window\",\n            label: userId\n        });\n    }\n}\n\nexport const trackStartEditingDoseWindow = (userId) => {\n    if (shouldLogAnalytics) {\n        ReactGA.event({\n            category: \"Engagement\",\n            action: \"Start editing dose window\",\n            label: userId\n        });\n    }\n}\n\nexport const trackSubmitEditedDoseWindow = (userId) => {\n    if (shouldLogAnalytics) {\n        ReactGA.event({\n            category: \"Engagement\",\n            action: \"Submit edited dose window\",\n            label: userId\n        });\n    }\n}\n\nexport const trackStartDeletingDoseWindow = (userId) => {\n    if (shouldLogAnalytics) {\n        ReactGA.event({\n            category: \"Engagement\",\n            action: \"Start deleting dose window\",\n            label: userId\n        });\n    }\n}\n\nexport const trackSubmitDeletingDoseWindow = (userId) => {\n    if (shouldLogAnalytics) {\n        ReactGA.event({\n            category: \"Engagement\",\n            action: \"Submit deleting dose window\",\n            label: userId\n        });\n    }\n}\n\nexport const trackStartEditingHealthMetrics = (userId) => {\n    if (shouldLogAnalytics) {\n        ReactGA.event({\n            category: \"Engagement\",\n            action: \"Start editing health metrics\",\n            label: userId\n        });\n    }\n}\n\nexport const trackSubmitEditingHealthMetrics = (userId) => {\n    if (shouldLogAnalytics) {\n        ReactGA.event({\n            category: \"Engagement\",\n            action: \"Submit editing health metrics\",\n            label: userId\n        });\n    }\n}\n\nexport const trackPausedService = (userId) => {\n    if (shouldLogAnalytics) {\n        ReactGA.event({\n            category: \"Churn\",\n            action: \"Paused service\",\n            label: userId\n        });\n    }\n}\n\nexport const trackResumedService = (userId) => {\n    if (shouldLogAnalytics) {\n        ReactGA.event({\n            category: \"Growth\",\n            action: \"Resumed service\",\n            label: userId\n        });\n    }\n}","import React from \"react\";\n\nimport { Box, Select } from \"grommet\";\n\nconst TimeInput = ({value, onChangeTime}) => {\n    const [hour, setHour] = React.useState(value.hour);\n    const [minute, setMinute] = React.useState(value.minute);\n    return (\n        <Box direction=\"row\">\n            <Select options={[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]} value={hour > 12 ? hour - 12 : (hour === 0 ? 12 : hour)} plain\n                onChange={\n                    ({value}) => {\n                        let newHour = hour >= 12 ? value + 12 : value % 12;\n                        setHour(newHour);\n                        onChangeTime({hour: newHour, minute});\n                    }\n                }\n            />\n            <Select options={[\"00\", \"15\", \"30\", \"45\"]} value={`${minute === 0 ? '0' : ''}${minute.toString()}`} plain onChange={({value}) => {\n                setMinute(parseInt(value));\n                onChangeTime({hour, minute: parseInt(value)});\n            }}/>\n            <Select options={[\"AM\", \"PM\"]} value={hour >= 12 ? \"PM\" : \"AM\"} plain onChange={({value}) => {\n                let newHour = hour;\n                if (value === \"AM\") {\n                    if (hour >= 12) {\n                        newHour = hour - 12;\n                        setHour(hour - 12);\n                    }\n                } else {\n                    if (hour < 12) {\n                        newHour = hour + 12;\n                        setHour(hour + 12);\n                    }\n                }\n                onChangeTime({hour: newHour, minute});\n            }}/>\n        </Box>\n    )\n}\n\nexport default TimeInput;","import React from \"react\";\nimport { Button, Spinner } from \"grommet\";\nimport { get } from \"lodash\";\n\nconst AnimatingButton = ({animating, ...props}) => {\n    if (animating) {\n        return <Button {...props} alignSelf=\"center\" label={null} disabled={true}><Spinner color={get(props, \"background.dark\", false) ? \"#FFF\" : \"brand\"}/></Button>;\n    } else {\n        return <Button {...props}>{props.children}</Button>;\n    }\n}\n\nexport default AnimatingButton;","import React from \"react\";\nimport { useCookies } from 'react-cookie';\nimport { Redirect, useHistory } from 'react-router-dom';\nimport {\n    deleteDoseWindow,\n    pauseUser,\n    pullPatientData,\n    pullPatientDataForNumber,\n    resumeUser,\n    setHealthMetricsTracking,\n    updateDoseWindow,\n} from '../api';\nimport {\n    trackStartAddingDoseWindow,\n    trackPatientPortalLoad,\n    trackViewedDayDetails,\n    trackStartDeletingDoseWindow,\n    trackStartEditingDoseWindow,\n    trackStartEditingHealthMetrics,\n    trackSubmitDeletingDoseWindow,\n    trackSubmitEditedDoseWindow,\n    trackSubmitEditingHealthMetrics,\n    trackResumedService,\n    trackPausedService\n} from '../analytics';\nimport { Scatter } from 'react-chartjs-2';\nimport { Box, Button, CheckBoxGroup, Calendar, DropButton, Grid, Heading, Layer, Paragraph, Select } from \"grommet\";\nimport { Add, Checkmark, CircleInformation, Clear, Close, Fireball, FormNextLink} from \"grommet-icons\";\nimport { DateTime } from 'luxon';\nimport 'chartjs-adapter-luxon';\nimport TimeInput from \"../components/TimeInput\";\nimport AnimatingButton from \"../components/AnimatingButton\";\n\nconst Home = () => {\n    const [cookies, setCookie, removeCookie] = useCookies(['token']);\n    const [patientData, setPatientData] = React.useState(null);\n    const [calendarMonth, setCalendarMonth] = React.useState(5);\n    const [impersonateOptions, setImpersonateOptions] = React.useState(null);\n    const [impersonating, setImpersonating] = React.useState(null);\n    const [selectedDay, setSelectedDay] = React.useState(null);\n    const [editingDoseWindow, setEditingDoseWindow] = React.useState(null);\n    const [deletingDoseWindow, setDeletingDoseWindow] = React.useState(null);\n    const [editingHealthTracking, setEditingHealthTracking] = React.useState(null);\n    const [timeRange, setTimeRange] = React.useState({label: \"all time\", value: null});\n    const history = useHistory();\n    console.log(timeRange);\n    const [animating, setAnimating] = React.useState(false);  // this is setting animating for ALL buttons for now\n\n    const dateRange = [DateTime.local(2021, 4, 1), DateTime.local(2021, 5, 31)]\n\n    const loadData = React.useCallback(async () => {\n        let loadedData = null;\n        if (impersonating) {\n            loadedData = await pullPatientDataForNumber(impersonating.value, calendarMonth);\n        } else {\n            loadedData = await pullPatientData(calendarMonth);\n        };\n        if (loadedData === null) {\n            removeCookie(\"token\");\n            return;\n        }\n        console.log(loadedData);\n        setPatientData(loadedData);\n        if (loadedData.impersonateList === null) { // only track non impersonating data\n            trackPatientPortalLoad(loadedData.patientId);\n        }\n        setCookie('token', loadedData.token, {secure: true});  // refresh login token\n        if (loadedData.impersonateList) {\n            setImpersonateOptions(\n                loadedData.impersonateList.map((tuple_data) => { return { label: tuple_data[0], value: tuple_data[1]}})\n            );\n        }\n        setAnimating(false);\n    }, [calendarMonth, impersonating, removeCookie, setCookie])\n\n    const shouldRerender = React.useMemo(() => {\n        if (!cookies.token) {\n            return false;\n        }\n        if (patientData === null) {\n            return true;\n        }\n        if (patientData.month !== calendarMonth) {\n            return true;\n        }\n        if (!!impersonating !== !! patientData.impersonating) {\n            return true;\n        }\n        if (impersonating && patientData.impersonating && patientData.phoneNumber !== impersonating.value) {\n            return true;\n        }\n        return false;\n    }, [calendarMonth, cookies.token, impersonating, patientData]);\n\n    React.useEffect(() => {\n        console.log(\"rerendering\")\n        if (shouldRerender) {\n            loadData();\n        }\n    }, [loadData, shouldRerender]);\n\n    const logout = () => {\n        removeCookie(\"token\");\n    }\n\n    const renderDay = React.useCallback(({date}) => {\n        let dayColor = null;\n        const dt = DateTime.fromJSDate(date);\n        const day = dt.day;\n        if (patientData !== null) {\n            if (patientData.eventData.length >= day) {\n                const dayOfMonthData = patientData.eventData[day - 1];\n                if (dt.month === calendarMonth) {\n                    if (dayOfMonthData.day_status === \"taken\") {\n                        dayColor = \"status-ok\";\n                    } else if (dayOfMonthData.day_status === \"missed\") {\n                        dayColor = \"status-error\";\n                    } else if (dayOfMonthData.day_status === \"skip\") {\n                        dayColor = \"status-warning\";\n                    }\n                }\n            }\n        }\n        return (\n            <Box align=\"center\" justify=\"center\" margin={{vertical: \"xsmall\"}}>\n                <Box width=\"30px\" height=\"30px\" round=\"medium\" background={{color: dayColor}} align=\"center\" justify=\"center\">\n                    <Paragraph>{day}</Paragraph>\n                </Box>\n            </Box>\n        );\n    }, [calendarMonth, patientData]);\n\n    const formattedHealthMetricData = React.useMemo(() => {\n        const units = {\n            weight: \"pounds\",\n            glucose: \"mg/dL\",\n            \"blood pressure\": \"mm/hg\"\n        }\n        const data = {}\n        if (patientData !== null) {\n            for (const metric in patientData.healthMetricData) {\n                const metric_list = patientData.healthMetricData[metric];\n                console.log(metric_list);\n                if (metric !== \"blood pressure\") {\n                    data[metric] = {\n                        datasets: [{\n                            data: metric_list.map((metric) => {\n                                const jsTime = DateTime.fromHTTP(metric.time);\n                                return {x: jsTime, y: metric.value};\n                            }),\n                            label: metric,\n                            fill: false,\n                            backgroundColor: 'rgb(255, 99, 132)',\n                            borderColor: 'rgba(255, 99, 132, 0.2)'\n                        }], options:{\n                                scales: {\n                                    x: {\n                                        type: \"time\",\n                                        time: {unit: \"day\"},\n                                        grid: {\"color\": [\"#777\"]},\n                                        ticks:{color: \"#FFF\"},\n                                        min: timeRange.value !== null ? DateTime.local().minus({days: timeRange.value}).toISODate() : null},\n                                    y: {grid: {\"color\": [\"#AAA\"]}, ticks:{color: \"#FFF\"}, title: {text:units[metric], display: true, color: \"#FFF\"}}\n                                },\n                                color: \"white\",\n                                plugins: {\n                                    legend: {display: false},\n                                },\n                                elements: {\n                                    point: {\n                                        hitRadius: 10,\n                                        hoverRadius: 10\n                                    }\n                                },\n                                showLine: true\n                        }\n                    };\n                } else { // blood pressure has two timeseries\n                    data[metric] = {\n                        datasets: [\n                        {\n                            data: metric_list.map((metric) => {\n                                const jsTime = DateTime.fromHTTP(metric.time);\n                                return {x: jsTime, y: metric.value.systolic};\n                            }),\n                            label: \"systolic\",\n                            fill: false,\n                            backgroundColor: 'rgb(255, 99, 132)',\n                            borderColor: 'rgba(255, 99, 132, 0.2)'\n                        },\n                        {\n                            data: metric_list.map((metric) => {\n                                const jsTime = DateTime.fromHTTP(metric.time);\n                                return {x: jsTime, y: metric.value.diastolic};\n                            }),\n                            label: \"diastolic\",\n                            fill: false,\n                            backgroundColor: 'rgb(99, 255, 132)',\n                            borderColor: 'rgba(99, 255, 132, 0.2)'\n                        }\n                    ], options:{\n                        scales: {\n                            x: {\n                                type: \"time\",\n                                time: {unit: \"day\"},\n                                grid: {\"color\": [\"#777\"]},\n                                ticks:{color: \"#FFF\"},\n                                min: timeRange.value !== null ? DateTime.local().minus({days: timeRange.value}).toISODate() : null\n                            },\n                            y: {grid: {\"color\": [\"#AAA\"]}, ticks:{color: \"#FFF\"}, title: {text:units[metric], display: true, color: \"#FFF\"}}\n                        },\n\n                        color: \"white\",\n                        plugins: {\n                            datalabels: {color: 'black'}\n                        },\n                        elements: {\n                            point: {\n                                hitRadius: 10,\n                                hoverRadius: 10\n                            }\n                        },\n                        showLine: true\n                    }\n                    };\n                }\n            }\n        }\n        console.log(\"returned HM data:\")\n        console.log(data);\n\n        return data;\n    }, [patientData, timeRange]);\n\n    const renderImpersonateListItem = React.useCallback((listItem) => {\n        console.log(listItem);\n        return listItem.label;\n    }, [])\n\n    const nextDayConversion = (dt) => {\n        if (dt.hour < 4) {\n            return dt.plus({days: 1});\n        }\n        return dt;\n    }\n\n    const validDoseWindows = React.useMemo(() => {\n        console.log(\"recomputing\")\n        if (editingDoseWindow === null) {\n            return true; // if you're not editing anything you're valid\n        };\n        if (patientData === null) {\n            return true;  // if we have no patient data your dose windows are fine\n        };\n        const editingStartTime = nextDayConversion(DateTime.utc(2021, 5, 1, editingDoseWindow.start_hour, editingDoseWindow.start_minute).setZone(\"local\").set({month: 5, day: 1}));\n        const editingEndTime = nextDayConversion(DateTime.utc(2021, 5, 1, editingDoseWindow.end_hour, editingDoseWindow.end_minute).setZone(\"local\").set({month: 5, day: 1}));\n        if (editingEndTime < editingStartTime.plus({minutes: 30})) {\n            return false; // dose window is too short\n        }\n        for (const dw of patientData.doseWindows) {\n            if (dw.id === editingDoseWindow.id) {\n                continue;  // we don't compare to the one we're editing\n            }\n            const existingStartTime = nextDayConversion(DateTime.utc(2021, 5, 1, dw.start_hour, dw.start_minute).setZone(\"local\").set({month: 5, day: 1}));\n            const existingEndTime = nextDayConversion(DateTime.utc(2021, 5, 1, dw.end_hour, dw.end_minute).setZone(\"local\").set({month: 5, day: 1}));\n            if (editingStartTime <= existingStartTime && existingStartTime <= editingEndTime) {\n                return false;\n            }\n            if (editingStartTime <= existingEndTime && existingEndTime <= editingEndTime) {\n                return false;\n            }\n        }\n        return true;\n    }, [editingDoseWindow, patientData]);\n\n    const currentTimeOfDay = React.useMemo(() => {\n        const currentTime = DateTime.local();\n        if (currentTime.hour > 4 && currentTime.hour < 12) {\n            return \"morning\";\n        } else if (currentTime.hour > 12 && currentTime.hour < 18) {\n            return \"afternoon\";\n        } else {\n            return \"evening\"\n        }\n    }, []);\n\n    const dateToDisplay = React.useMemo(() => {\n        const currentDay = DateTime.local();\n        if (calendarMonth === currentDay.month) {\n            return currentDay;\n        } else {\n            return currentDay.set({month: calendarMonth, day: 1});\n        }\n    }, [calendarMonth])\n\n    const randomChoice = (arr) => {\n        return arr[Math.floor(arr.length * Math.random())];\n    }\n    const randomHeaderEmoji = React.useMemo(() =>  {\n        return randomChoice([\"💫\", \"🌈\", \"🌱\", \"🏆\", \"📈\", \"💎\", \"💡\", \"🔆\", \"🔔\"]);\n    }, [])\n\n    const renderDoseWindowEditFields = React.useCallback(() => {\n        if (patientData === null) {\n            return null;\n        }\n        const startTime = DateTime.utc(2021, 5, 1, editingDoseWindow.start_hour, editingDoseWindow.start_minute);\n        const endTime = DateTime.utc(2021, 5, 1, editingDoseWindow.end_hour, editingDoseWindow.end_minute);\n        return (\n            <>\n                <Paragraph size=\"small\" margin={{bottom: \"none\"}}>Start time (earliest time you'll be reminded)</Paragraph>\n                <TimeInput value={startTime.setZone('local')} color=\"dark-3\" onChangeTime={\n                    (newTime) => {\n                        const newDwTime = DateTime.local(2021, 5, 1, newTime.hour, newTime.minute).setZone(\"UTC\");\n                        setEditingDoseWindow({...editingDoseWindow, start_hour: newDwTime.hour, start_minute: newDwTime.minute});\n                    }}\n                />\n                <Paragraph size=\"small\" margin={{bottom: \"none\"}}>End time (latest time you'll be reminded)</Paragraph>\n                <TimeInput value={endTime.setZone('local')} color=\"dark-3\" onChangeTime={\n                    (newTime) => {\n                        console.log(`changed time to ${JSON.stringify(newTime)}`)\n                        const newDwTime = DateTime.local(2021, 5, 1, newTime.hour, newTime.minute).setZone(\"UTC\");\n                        setEditingDoseWindow({...editingDoseWindow, end_hour: newDwTime.hour, end_minute: newDwTime.minute});\n                    }}\n                />\n                {<AnimatingButton\n                    onClick={async () => {\n                        setAnimating(true);\n                        console.log(\"set animating\");\n                        await updateDoseWindow(editingDoseWindow);\n                        await loadData();\n                        setEditingDoseWindow(null);\n                        if (impersonateOptions === null) {\n                            trackSubmitEditedDoseWindow(patientData.patientId);\n                        }\n                    }}\n                    label={validDoseWindows ? editingDoseWindow.id ? \"Update\" : \"Create\" : \"Invalid dose window\"}\n                    disabled={!validDoseWindows}\n                    animating={animating}\n                />}\n                {editingDoseWindow.id ? <AnimatingButton onClick={() => {\n                    setDeletingDoseWindow(editingDoseWindow);\n                    if (impersonateOptions === null) {\n                        trackStartDeletingDoseWindow(patientData.patientId);\n                    }\n                }}\n                    disabled={animating}\n                    size=\"small\"\n                    padding={{horizontal: \"none\"}}\n                    margin={{top: \"medium\"}}\n                    label=\"Delete dose window\"\n                    color=\"status-error\"\n                    plain={true}\n                    alignSelf=\"center\"\n                /> : null}\n            </>\n        )\n    }, [animating, editingDoseWindow, impersonateOptions, loadData, patientData, validDoseWindows]);\n\n    if (!cookies.token) {\n        return <Redirect to=\"/login\"/>;\n    }\n    if (patientData !== null && [\"payment_method_requested\"].includes(patientData.state)) {\n        return <Redirect to=\"/payment\"/>\n    }\n    if (patientData !== null && [\"intro\", \"dose_windows_requested\", \"dose_window_times_requested\", \"timezone_requested\"].includes(patientData.state)) {\n        return <Redirect to=\"/finishOnboarding\"/>\n    }\n\n    const orderDays = (t1, t2) => {\n        if (t1 === t2) {\n            return 0;\n        }\n        if (t1 === \"morning\" || (t1 === \"afternoon\" && t2 === \"evening\")) {\n            return -1;\n        }\n        return 1;\n    }\n\n    console.log(timeRange.label);\n    return (\n        <Box>\n            {impersonateOptions !== null ?\n                <Box direction=\"row\" align=\"center\" gap=\"small\" pad={{\"horizontal\": \"medium\"}}>\n                    <Paragraph>Impersonating:</Paragraph>\n                    <Select\n                        options={impersonateOptions}\n                        children={renderImpersonateListItem}\n                        onChange={({option}) => {\n                            console.log(\"setting\");\n                            setImpersonating(option);\n                        }}\n                    />\n                </Box> : null}\n            {patientData && patientData.earlyAdopterStatus ? (\n                <Box align=\"center\" background=\"brand\" justify=\"evenly\">\n                    <Box direction=\"row\" justify=\"center\" align=\"center\">\n                        <Paragraph size=\"small\" margin={{right: \"small\"}}>COHERENCE EARLY ADOPTER</Paragraph>\n                        <Fireball/>\n                    </Box>\n                </Box>) : null\n            }\n            <Box align=\"center\">\n                <Heading size=\"small\">Good {currentTimeOfDay}{patientData ? `, ${patientData.patientName}` : \"\"}.</Heading>\n            </Box>\n            { patientData && patientData.state === \"subscription_expired\" ?\n                <Box\n                    align=\"center\"\n                    background={{\"color\":\"status-error\", \"dark\": true}}\n                    round=\"medium\"\n                    margin={{horizontal: \"large\", bottom: \"medium\"}}\n                    pad=\"medium\"\n                >\n                    <Paragraph textAlign=\"center\" margin={{vertical: \"none\"}}>Your subscription expired on {DateTime.fromHTTP(patientData.subscriptionEndDate).toLocaleString(DateTime.DATE_MED)}.</Paragraph>\n                    <Button label=\"Renew subscription\" onClick={() => { history.push(\"/payment\") }} margin={{top: \"small\"}}/>\n                </Box>\n                :\n                null\n            }\n            <Box>\n                {patientData && patientData.takeNow ?\n                    <Box\n                        align=\"center\"\n                        background={{\"color\":\"status-warning\", \"dark\": true}}\n                        round=\"medium\"\n                        margin={{horizontal: \"large\"}}\n                        pad={{vertical: \"medium\"}}\n                        animation={{\"type\":\"pulse\",\"size\":\"medium\",\"duration\":2000}}\n                    >\n                        <Paragraph alignSelf=\"center\" margin={{vertical: \"none\"}}>Dose to take now!</Paragraph>\n                    </Box>\n                    :\n                    <Box align=\"center\" background={{\"color\":\"brand\", \"dark\": true}} round=\"medium\" margin={{horizontal: \"large\"}}>\n                        <Paragraph>No doses to take right now. {randomHeaderEmoji}</Paragraph>\n                    </Box>\n                }\n            </Box>\n            <Box margin={{vertical: \"medium\"}} pad={{horizontal: \"large\"}}>\n                <DropButton\n                    icon={<CircleInformation/>}\n                    label=\"How do I use Coherence?\"\n                    dropContent={\n                        <Box pad={{horizontal: \"small\"}}>\n                            <Paragraph textAlign=\"center\">Texting commands</Paragraph>\n                            <Grid columns={[\"xsmall\", \"small\"]} align=\"center\" justifyContent=\"center\" gap={{column: \"small\"}}>\n                                <Paragraph size=\"small\">T, taken</Paragraph>\n                                <Paragraph size=\"small\">Mark your medication as taken at the current time</Paragraph>\n                                <Paragraph size=\"small\">T @ 5:00pm</Paragraph>\n                                <Paragraph size=\"small\">Mark your medication as taken at 5pm</Paragraph>\n                                <Paragraph size=\"small\">S, skip</Paragraph>\n                                <Paragraph size=\"small\">Skip the current dose</Paragraph>\n                                <Paragraph size=\"small\">1</Paragraph>\n                                <Paragraph size=\"small\">Delay the reminder by ten minutes</Paragraph>\n                                <Paragraph size=\"small\">2</Paragraph>\n                                <Paragraph size=\"small\">Delay the reminder by half an hour</Paragraph>\n                                <Paragraph size=\"small\">3</Paragraph>\n                                <Paragraph size=\"small\">Delay the reminder by an hour</Paragraph>\n                                <Paragraph size=\"small\">20, 20 min</Paragraph>\n                                <Paragraph size=\"small\">Delay the reminder by 20 minutes</Paragraph>\n                                <Paragraph size=\"small\">glucose:140, 140 mg/dL</Paragraph>\n                                <Paragraph size=\"small\">Record glucose reading</Paragraph>\n                                <Paragraph size=\"small\">weight:150, 150 pounds, 150 lb</Paragraph>\n                                <Paragraph size=\"small\">Record weight reading</Paragraph>\n                                <Paragraph size=\"small\">120/80, 120 80</Paragraph>\n                                <Paragraph size=\"small\">Record blood pressure reading</Paragraph>\n                                <Paragraph size=\"small\">W, website, site</Paragraph>\n                                <Paragraph size=\"small\">Get the website link sent to you</Paragraph>\n                                <Paragraph size=\"small\">Eating, going for a walk</Paragraph>\n                                <Paragraph size=\"small\">Tell Coherence you're busy with an activity</Paragraph>\n                                <Paragraph size=\"small\">X</Paragraph>\n                                <Paragraph size=\"small\">Report an error</Paragraph>\n                            </Grid>\n                        </Box>\n                    }\n                    dropAlign={{ top: 'bottom' }}\n                />\n            </Box>\n            <Box pad=\"medium\" background={{color: \"light-3\"}}>\n                <Paragraph textAlign=\"center\" margin={{vertical: \"none\"}} fill={true}>Medication history</Paragraph>\n                <Calendar\n                    date={dateToDisplay.toISO()}\n                    fill={true}\n                    onSelect={(date) => {\n                        const dt = DateTime.fromISO(date);\n                        setSelectedDay(dt.day);\n                        if (impersonateOptions === null) {\n                            trackViewedDayDetails(patientData.patientId);\n                        }\n                    }}\n                    showAdjacentDays={false}\n                    bounds={dateRange.map((date) => {return date.toString()})}\n                    children={renderDay}\n                    daysOfWeek={true}\n                    onReference={(date) => {\n                        setCalendarMonth(DateTime.fromISO(date).month);\n                        setPatientData({...patientData, eventData: []}); // hide event data while we load\n                    }}\n                    animate={false}\n                />\n            </Box>\n            {selectedDay && (\n                <Layer\n                    onEsc={() => setSelectedDay(false)}\n                    onClickOutside={() => setSelectedDay(false)}\n                    responsive={false}\n                >\n                    <Box width=\"70vw\" pad=\"large\">\n                        <Box direction=\"row\" justify=\"between\">\n                            <Paragraph size=\"large\">{DateTime.local().set({month: calendarMonth}).monthLong} {selectedDay}</Paragraph>\n                            <Button icon={<Close />} onClick={() => setSelectedDay(false)} />\n                        </Box>\n                        {\n                            patientData.eventData[selectedDay - 1].day_status ?\n                            Object.keys(patientData.eventData[selectedDay - 1].time_of_day).sort(orderDays).map((key) => {\n                                let numberSuffix = patientData.eventData[selectedDay - 1].time_of_day[key].length > 1;  // handle multiple dose windows in the same time of day\n                                return (\n                                    patientData.eventData[selectedDay - 1].time_of_day[key].map((event, index) => {\n                                        return (\n                                            <>\n                                                <Paragraph key={`tod-${key}`} margin={{bottom: \"none\"}}>{key} dose{numberSuffix ? ` ${index + 1}` : ''}</Paragraph>\n                                                <Box key={`todStatusContainer-${key}`} pad={{left: \"medium\"}} direction=\"row\" align=\"center\" justify=\"between\">\n                                                    <Paragraph key={`todStatus-${key}`} size=\"small\">\n                                                        {event.type}{event.time ? ` at ${DateTime.fromJSDate(new Date(event.time)).toLocaleString(DateTime.TIME_SIMPLE)}` : ''}\n                                                    </Paragraph>\n                                                    {event.type === \"taken\" ? <Checkmark color=\"status-ok\" size=\"small\"/> : null}\n                                                    {event.type === \"skipped\" ? <Clear color=\"status-warning\" size=\"small\"/> : null}\n                                                    {event.type === \"missed\" ? <Close color=\"status-error\" size=\"small\"/> : null}\n                                                </Box>\n                                            </>\n                                        )\n                                    })\n                                )\n                            }) :\n                            <Paragraph>No data for this day.</Paragraph>\n                        }\n                    </Box>\n                </Layer>\n            )}\n            <Box align=\"center\" background=\"brand\" pad={{bottom: \"large\"}}>\n                <Paragraph margin={{bottom: \"none\"}}>Health tracking</Paragraph>\n                {Object.keys(formattedHealthMetricData).length === 0 ?\n                    <>\n                        <Paragraph size=\"small\">You're not tracking any health metrics yet.</Paragraph>\n                        <Paragraph size=\"small\" textAlign=\"center\">Tracking is a brand new feature that allows you to text us health data such as blood pressure, weight, or glucose. You can then view your historical data here at any time.</Paragraph>\n                    </>\n                : null}\n                {Object.keys(formattedHealthMetricData).length !== 0 ?\n                <Box margin={{top: \"small\"}}>\n                    <Select\n                        options={[{label: \"week\", value: 7}, {label: \"month\", value: 30}, {label: \"3 months\", value: 90}, {label: \"year\", value: 365}, {label: \"all time\", value: null}]}\n                        children={(option) => {return <Paragraph margin=\"small\">{option.label}</Paragraph>}}\n                        onChange={({value}) => { setTimeRange(value)}}\n                        valueLabel={<Paragraph margin={{vertical: \"xsmall\", horizontal: \"small\"}}>{timeRange.label}</Paragraph>}\n                        // labelKey=\"label\"\n                    />\n                </Box> : null}\n                {formattedHealthMetricData && \"blood pressure\" in formattedHealthMetricData ? (\n                    <Box pad={{horizontal: \"large\"}} fill=\"horizontal\">\n                        <Paragraph size=\"small\" margin={{bottom: \"none\"}}>Blood pressure</Paragraph>\n                        {formattedHealthMetricData[\"blood pressure\"].datasets[0].data.length > 0 ?\n                            <Scatter data={{datasets: formattedHealthMetricData[\"blood pressure\"].datasets}} options={formattedHealthMetricData[\"blood pressure\"].options}/> :\n                            <Paragraph alignSelf=\"center\" size=\"small\">No blood pressure data recorded yet. Example texts you can send: \"120/80\", \"120 80\".</Paragraph>\n                        }\n                    </Box>) : null}\n                {formattedHealthMetricData && \"weight\" in formattedHealthMetricData ?\n                    <Box pad={{horizontal: \"large\"}} fill=\"horizontal\">\n                        <Paragraph size=\"small\" margin={{bottom: \"none\"}}>Weight</Paragraph>\n                        {formattedHealthMetricData.weight.datasets[0].data.length > 0 ?\n                        <Scatter data={{datasets: formattedHealthMetricData.weight.datasets}} options={formattedHealthMetricData.weight.options}/> :\n                        <Paragraph alignSelf=\"center\" size=\"small\">No weight data recorded yet. Example texts you can send: \"weight:150\", \"150 lb\", \"150 pounds\".</Paragraph>}\n                    </Box>\n                    : null}\n                {formattedHealthMetricData && \"glucose\" in formattedHealthMetricData ?\n                    <Box pad={{horizontal: \"large\"}} fill=\"horizontal\">\n                        <Paragraph size=\"small\" margin={{bottom: \"none\"}}>Glucose</Paragraph>\n                        {formattedHealthMetricData.glucose.datasets[0].data.length > 0 ?\n                        <Scatter data={{datasets: formattedHealthMetricData.glucose.datasets}} options={formattedHealthMetricData.glucose.options}/> :\n                        <Paragraph alignSelf=\"center\" size=\"small\">No glucose data recorded yet. Example texts you can send: \"glucose:140\", \"140 mg/dL\"</Paragraph>}\n                    </Box>\n                    : null}\n                <Button label={Object.keys(formattedHealthMetricData).length === 0 ? \"Start tracking\": \"Edit tracking\"} onClick={() => {\n                    setEditingHealthTracking(Object.keys(formattedHealthMetricData));\n                    if (impersonateOptions === null) {\n                        trackStartEditingHealthMetrics(patientData.patientId);\n                    }\n                }} margin={{top: \"medium\"}}/>\n            </Box>\n            {editingHealthTracking !== null ?\n                <Layer\n                    onEsc={() => setEditingHealthTracking(null)}\n                    onClickOutside={() => setEditingHealthTracking(null)}\n                    responsive={false}\n                >\n                    <Box width=\"70vw\" pad=\"large\">\n                        <Box direction=\"row\" justify=\"between\">\n                            <Paragraph size=\"large\">Choose what you want to track</Paragraph>\n                            <Button icon={<Close />} onClick={() => setEditingHealthTracking(null)} />\n                        </Box>\n                        <CheckBoxGroup\n                            options={[\"blood pressure\", \"weight\", \"glucose\"]}\n                            value={editingHealthTracking}\n                            onChange={(e) => {setEditingHealthTracking(e.value)}}\n                        />\n                        <AnimatingButton animating={animating} label=\"Save changes\" margin={{top:\"medium\"}} onClick={async () => {\n                            setAnimating(true);\n                            console.log(editingHealthTracking);\n                            await setHealthMetricsTracking(editingHealthTracking);\n                            await loadData();\n                            setEditingHealthTracking(null);\n                            if (impersonateOptions === null) {\n                                trackSubmitEditingHealthMetrics(patientData.patientId);\n                            }\n                        }}/>\n                    </Box>\n                </Layer> : null\n            }\n            <Box align=\"center\" pad={{vertical: \"medium\"}} margin={{horizontal: \"xlarge\"}} border=\"bottom\">\n                <Paragraph textAlign=\"center\" margin={{vertical: \"none\"}}>Dose windows</Paragraph>\n                    {\n                        patientData ? patientData.doseWindows.map((dw) => {\n                            const startTime = DateTime.utc(2021, 5, 1, dw.start_hour, dw.start_minute);\n                            const endTime = DateTime.utc(2021, 5, 1, dw.end_hour, dw.end_minute);\n                            return (\n                                <Grid key={`doseWindowContainer-${dw.id}`} columns={[\"small\", \"flex\", \"flex\"]} align=\"center\" pad={{horizontal: \"large\"}} alignContent=\"center\" justifyContent=\"center\" justify=\"center\">\n                                    <Box direction=\"row\" align=\"center\">\n                                        <Paragraph>{startTime.setZone('local').toLocaleString(DateTime.TIME_SIMPLE)}</Paragraph>\n                                        <FormNextLink/>\n                                        <Paragraph>{endTime.setZone('local').toLocaleString(DateTime.TIME_SIMPLE)}</Paragraph>\n                                    </Box>\n                                    <Button label=\"edit\" onClick={() => {\n                                        setEditingDoseWindow(dw);\n                                        if (impersonateOptions === null) {\n                                            trackStartEditingDoseWindow(patientData.patientId);\n                                        }\n                                    }} size=\"small\" margin={{horizontal: \"none\"}}/>\n                                </Grid>\n                            )\n                        }) : null\n                    }\n                    <Button label=\"Add dose window\" onClick={() => {\n                        setEditingDoseWindow({start_hour: 0, start_minute:0, end_hour: 0, end_minute: 0});\n                        if (impersonateOptions === null) {\n                            trackStartAddingDoseWindow(patientData.patientId);\n                        }\n                    }} icon={<Add/>}/>\n            </Box>\n            {editingDoseWindow && (\n                <Layer\n                    onEsc={() => setEditingDoseWindow(null)}\n                    onClickOutside={() => setEditingDoseWindow(null)}\n                    responsive={false}\n                >\n                    <Box width=\"90vw\" pad=\"large\">\n                        <Box direction=\"row\" justify=\"between\">\n                            <Paragraph size=\"large\">Edit dose window</Paragraph>\n                            <Button icon={<Close />} onClick={() => setEditingDoseWindow(null)} />\n                        </Box>\n                        <Box>\n                            {renderDoseWindowEditFields(editingDoseWindow)}\n                        </Box>\n                    </Box>\n                </Layer>\n            )}\n            {deletingDoseWindow && (\n                <Layer\n                    onEsc={() => setDeletingDoseWindow(null)}\n                    onClickOutside={() => setDeletingDoseWindow(null)}\n                    responsive={false}\n                >\n                    <Box width=\"90vw\" pad=\"large\">\n                        <Box direction=\"row\" justify=\"between\">\n                            <Paragraph size=\"large\">Confirm delete dose window</Paragraph>\n                            <Button icon={<Close />} onClick={() => setDeletingDoseWindow(null)}/>\n                        </Box>\n                        <Box align=\"center\">\n                            <Paragraph margin={{bottom: \"none\"}}>You're about to delete the dose window</Paragraph>\n                            <Box direction=\"row\" align=\"center\" margin={{bottom: \"medium\"}}>\n                                <Paragraph>{DateTime.utc(2021, 5, 1, deletingDoseWindow.start_hour, deletingDoseWindow.start_minute).setZone('local').toLocaleString(DateTime.TIME_SIMPLE)}</Paragraph>\n                                <FormNextLink/>\n                                <Paragraph>{DateTime.utc(2021, 5, 1, deletingDoseWindow.end_hour, deletingDoseWindow.end_minute).setZone('local').toLocaleString(DateTime.TIME_SIMPLE)}</Paragraph>\n                            </Box>\n                            <AnimatingButton onClick={async () => {\n                                setAnimating(true);\n                                await deleteDoseWindow(deletingDoseWindow.id)\n                                await loadData();\n                                setDeletingDoseWindow(null);\n                                setEditingDoseWindow(null);\n                                if (impersonateOptions === null) {\n                                    trackSubmitDeletingDoseWindow(patientData.patientId);\n                                }\n                            }} label=\"Confirm\" animating={animating}/>\n                        </Box>\n                    </Box>\n                </Layer>\n            )}\n            <Box align=\"center\" pad={{vertical: \"medium\"}}>\n                {patientData ?\n                <>\n                    <Paragraph textAlign=\"center\" margin={{vertical: \"none\"}}>Pause / resume Coherence</Paragraph>\n                    <Paragraph size=\"small\" color=\"dark-3\">Coherence is currently {patientData.pausedService ? \"paused\" : \"active\"}.</Paragraph>\n                    <AnimatingButton\n                        background={patientData.pausedService ? {\"dark\": true} : null}\n                        animating={animating}\n                        style={{padding: \"10px\"}}\n                        primary={patientData.pausedService}\n                        onClick={async () => {\n                            setAnimating(true);\n                            if (patientData.pausedService) {\n                                await resumeUser();\n                                if (impersonateOptions === null) {\n                                    trackResumedService(patientData.patientId);\n                                }\n                            } else {\n                                await pauseUser();\n                                if (impersonateOptions === null) {\n                                    trackPausedService(patientData.patientId);\n                                }\n                            }\n                            loadData();\n                        }} label={`${patientData.pausedService ? \"Resume\" : \"Pause\"} Coherence`}\n                        disabled={patientData.state === \"subscription_expired\"}\n                    />\n                    {patientData.pausedService ? <Paragraph size=\"small\" color=\"status-warning\" textAlign=\"center\">While Coherence is paused, we can't respond to any texts you send us, or remind you about your medications.</Paragraph> : null}\n                </> : null}\n            </Box>\n            <Box align=\"center\" pad={{vertical: \"medium\"}} margin={{horizontal: \"xlarge\"}} border=\"top\">\n                <Paragraph textAlign=\"center\" margin={{vertical: \"none\"}}>Need help with anything?</Paragraph>\n                <Paragraph size=\"small\" color=\"dark-3\">Our customer service is just a text away at (650) 667-1146. Reach out any time and we'll get back to you in a few hours!</Paragraph>\n            </Box>\n            <Box align=\"center\" pad={{vertical: \"medium\"}} margin={{horizontal: \"xlarge\"}} border=\"top\" direction=\"row\" justify={patientData && patientData.earlyAdopterStatus ? \"center\" : \"between\"}>\n                {patientData && !patientData.earlyAdopterStatus ? <Button onClick={() => {history.push(\"/payment\")}} label=\"Manage subscription\" size=\"small\"/> : null}\n                <Button onClick={logout} label=\"Log out\" size=\"small\"/>\n            </Box>\n        </Box>\n    )\n}\n\nexport default Home;","import React from \"react\";\nimport { login } from \"../api\";\nimport { useCookies } from 'react-cookie';\nimport { Redirect, useHistory } from 'react-router-dom';\nimport { Box, Paragraph, Heading, Button, TextInput } from \"grommet\";\nimport { Phone, Login, Fireball, Lock } from \"grommet-icons\";\n\nconst Intro = () => {\n    const history = useHistory();\n    const [phoneNumber, setPhoneNumber] = React.useState(\"\");\n    const [secretCode, setSecretCode] = React.useState(\"\");\n    const [password, setPassword] = React.useState(\"\");\n    const [passwordConfirm, setPasswordConfirm] = React.useState(\"\");\n    const [componentToDisplay, setComponentToDisplay] = React.useState(\"phoneNumber\");\n    const [cookies, setCookie] = useCookies([\"token\"]);\n    const [authError, setAuthError] = React.useState(false);\n    const submitAll = React.useCallback(async () => {\n        const response = await login(phoneNumber, secretCode, password);\n        if (response === null) {\n            setAuthError(true);\n        } else {\n            if (response.status === \"success\") {\n                console.log(`setting cookie to ${response.token}`);\n                setCookie(\"token\", response.token, {secure: true});\n                if (response.state === \"payment_method_requested\") {\n                    history.push(\"/payment\");\n                } else {\n                    console.log(\"redirecting to home\");\n                    history.push(\"/\");\n                }\n            }\n            console.log(response);\n            console.log(response.status);\n            setComponentToDisplay(response.status);\n            setAuthError(false);\n        }\n    }, [password, phoneNumber, secretCode, setCookie])\n    const getInputField = React.useCallback(() => {\n        if (componentToDisplay === \"phoneNumber\") {\n            return <>\n                <Paragraph textAlign=\"center\" size=\"small\">Enter phone number.</Paragraph>\n                <TextInput\n                    icon={<Phone/>}\n                    placeholder=\"(555) 555-5555\"\n                    size=\"small\"\n                    value={phoneNumber}\n                    onChange={(event) => {setPhoneNumber(event.target.value)}}\n                />\n                {authError ? <Paragraph size=\"small\">Invalid phone number.</Paragraph> : null}\n            </>\n        } else if (componentToDisplay === \"2fa\") {\n            return <>\n                <Paragraph textAlign=\"center\" size=\"small\">We've texted you a secret code, enter it below.</Paragraph>\n                <TextInput\n                    icon={<Fireball />}\n                    placeholder=\"123456\"\n                    size=\"small\"\n                    value={secretCode}\n                    onChange={(event) => {setSecretCode(event.target.value)}}\n                />\n                {authError ? <Paragraph size=\"small\">Invalid secret code.</Paragraph> : null}\n            </>\n        } else if (componentToDisplay === \"password\") {\n            return <>\n                <Paragraph textAlign=\"center\" size=\"small\">Enter password.</Paragraph>\n                <TextInput\n                    icon={<Lock />}\n                    placeholder=\"•••••••••\"\n                    size=\"small\"\n                    value={password}\n                    onChange={(event) => {\n                        setPassword(event.target.value);\n                        setPasswordConfirm(event.target.value);\n                    }}\n                    type=\"password\"\n                />\n                {authError ? <Paragraph size=\"small\">Invalid password. If you'd like us to reset it, give us a text at (650) 667-1146.</Paragraph> : null}\n            </>\n        } else if (componentToDisplay === \"register\") {\n            return <>\n                <Paragraph textAlign=\"center\" size=\"small\">Create your password.</Paragraph>\n                <TextInput\n                    icon={<Lock />}\n                    placeholder=\"Enter password\"\n                    size=\"small\"\n                    value={password}\n                    onChange={(event) => {setPassword(event.target.value)}}\n                    type=\"password\"\n                />\n                <TextInput\n                    icon={<Lock />}\n                    placeholder=\"Type it again\"\n                    size=\"small\"\n                    value={passwordConfirm}\n                    onChange={(event) => {setPasswordConfirm(event.target.value)}}\n                    type=\"password\"\n                />\n                {password !== passwordConfirm ? <Paragraph size=\"small\">Passwords don't match.</Paragraph> : null}\n            </>\n        }\n    }, [authError, componentToDisplay, password, passwordConfirm, phoneNumber, secretCode])\n    if (cookies.token) {\n        return <Redirect to=\"/\"/>;\n    }\n    return (\n        <Box height=\"100vh\" flex=\"grow\" background={{\"position\":\"center\",\"dark\":false,\"opacity\":\"strong\"}}>\n            <Box height=\"40vh\" align=\"center\" justify=\"center\" pad=\"large\">\n                <Paragraph>welcome to</Paragraph>\n                <Heading>coherence</Heading>\n            </Box>\n            <Box height=\"60vh\" align=\"center\" justify=\"between\" background={{color: \"brand\", dark: true}} pad=\"large\">\n                <Paragraph color=\"white\" textAlign=\"center\">Peace of mind with your medications is just around the corner.</Paragraph>\n                <Box>\n                    <Box width=\"200px\" margin={{bottom: \"medium\", top: \"xsmall\"}}>\n                        {getInputField()}\n                    </Box>\n                    <Button label=\"submit\" icon={<Login/>} onClick={submitAll} disabled={password !== passwordConfirm}/>\n                </Box>\n            </Box>\n        </Box>\n    )\n}\n\nexport default Intro;","import React from \"react\";\nimport {\n    CardElement,\n    useStripe,\n    useElements,\n  } from '@stripe/react-stripe-js';\nimport AnimatingButton from \"../components/AnimatingButton\";\nimport { Paragraph, Spinner } from \"grommet\";\nimport { submitPaymentInfo } from \"../api\";\n\nconst StripeCardEntry = ({ submitText, clientSecret, afterSubmitAction, payOnSubmit }) => {\n    console.log(payOnSubmit);\n    const stripe = useStripe();\n    const elements = useElements();\n    const [validatingCard, setValidatingCard] = React.useState(false);\n    const [ready, setReady] = React.useState(false);\n\n    // Use card Element to tokenize payment details\n    const submitPayment = React.useCallback(async () => {\n        const cardElement = elements.getElement(CardElement);\n        setValidatingCard(true);\n        let stripeReturnData = null;\n        if (payOnSubmit) {\n            console.log(\"in here\")\n            stripeReturnData = await stripe.confirmCardPayment(clientSecret, {\n                payment_method: {\n                    card: cardElement,\n                    billing_details: {\n                        name: \"Peter Lu\"\n                    },\n                },\n                setup_future_usage: \"off_session\"  // allows us to charge card while not in checkout flow\n            });\n        }\n        else {\n            console.log(\"calling confirm card setup\")\n            stripeReturnData = await stripe.confirmCardSetup(clientSecret, {\n                payment_method: {\n                    card: cardElement,\n                    billing_details: {\n                        name: \"Peter Lu\"\n                    },\n                },\n                // setup_future_usage: \"off_session\"  // allows us to charge card while not in checkout flow\n            });\n        }\n        setValidatingCard(false);\n        console.log(stripeReturnData);\n    }, [clientSecret, elements, payOnSubmit, stripe])\n\n    if (!stripe || !elements) {\n        // Stripe.js has not loaded yet. Make sure to disable\n        // form submission until Stripe.js has loaded.\n        return <Spinner />;\n    }\n\n    return (\n        <>\n            <CardElement onReady={() => {setReady(true)}} />\n            {ready ? <>\n                <AnimatingButton\n                    label={submitText ? submitText : \"Save payment information\"}\n                    onClick={async () => {\n                        await submitPaymentInfo(); // submits to our backend\n                        await submitPayment();  // submits to stripe\n                        afterSubmitAction();  // any reloading that needs to be done after submitting payment info\n                    }}\n                    animating={validatingCard}\n                />\n                {validatingCard ? <Paragraph>Submitting your payment information. Please do not close this window.</Paragraph> : null}\n                </> : <Spinner />\n            }\n        </>\n    )\n}\n\nexport default StripeCardEntry;","import React from \"react\";\nimport { Box, Button, Heading, Layer, Paragraph, Spinner } from \"grommet\";\nimport { cancelSubscription, pullPatientPaymentData, renewSubscription, submitPaymentInfo } from \"../api\";\nimport { useCookies } from 'react-cookie';\nimport { useHistory } from \"react-router-dom\";\n\nimport { DateTime } from \"luxon\";\nimport { Elements } from '@stripe/react-stripe-js';\n\nimport {loadStripe} from '@stripe/stripe-js';\n\nimport StripeCardEntry from \"../components/StripeCardEntry\";\nimport { Close } from \"grommet-icons\";\nimport AnimatingButton from \"../components/AnimatingButton\";\n\nconst Payment = () => {\n      // Initialize an instance of stripe.\n    const [loading, setLoading] = React.useState(true);\n    const [animating, setAnimating] = React.useState(false);\n    const [paymentData, setPaymentData] = React.useState(null);\n    const [addCardModalVisible, setAddCardModalVisible] = React.useState(false);\n    console.log(\"card modal visible\");\n    console.log(addCardModalVisible);\n    const [_, __, removeCookie] = useCookies(['token']);\n    const history = useHistory();\n    const loadData = React.useCallback(async () => {\n        setLoading(true);\n        let loadedData = await pullPatientPaymentData();\n        if (loadedData === null) {\n            removeCookie(\"token\");\n            history.push(\"/login\");\n        }\n        console.log(loadedData.state);\n        if ([\"intro\", \"dose_windows_requested\", \"dose_window_times_requested\", \"timezone_requested\"].includes(loadedData.state)) {\n            history.push(\"/finishOnboarding\");\n        }\n        setPaymentData(loadedData);\n        setLoading(false);\n        setAnimating(false);\n    }, [history, removeCookie]);\n\n    const stripePromise = React.useMemo(() => {\n        return paymentData !== null ? loadStripe(paymentData.publishable_key) : null;\n    }, [paymentData]);\n\n    React.useEffect(() => {\n        if (loading) {\n            loadData();\n        }\n    }, [loadData, loading]);\n\n    if (loading) {\n        return <Spinner />\n    }\n    if (paymentData.secondary_state === \"payment_verification_pending\") {\n        return <Paragraph>We're verifying your payment information. You'll get a text when you're verified with further instructions. Thanks for your patience!</Paragraph>\n    } else if (paymentData.state === 'payment_method_requested') {\n        return (\n            <Elements stripe={stripePromise}>\n                <Box padding=\"large\">\n                    <Heading size=\"small\">Enter payment information</Heading>\n                    <Paragraph>Looking forward to helping you with your medication. If you have any questions before signing up, please reach out to us over text at (650) 667-1146.</Paragraph>\n                    <StripeCardEntry\n                        submitText=\"Start Coherence subscription ($6.99)\"\n                        clientSecret={paymentData.client_secret}\n                        afterSubmitAction={loadData}\n                        payOnSubmit={true}\n                    />\n                </Box>\n            </Elements>\n        );\n    } else if ([\"paused\", \"active\", \"subscription_expired\"].includes(paymentData.state)) {\n        return (\n                <Box margin=\"large\">\n                    <Heading size=\"small\">Manage your subscription</Heading>\n                    {paymentData.state === \"subscription_expired\" ? (\n                        <>\n                            <Paragraph alignSelf=\"center\">Your subscription expired on {DateTime.fromHTTP(paymentData.subscription_end_date).toLocaleString(DateTime.DATE_MED)}</Paragraph>\n                            {paymentData.payment_method ? (\n                                <AnimatingButton\n                                    label=\"Renew for $6.99\"\n                                    onClick={async () => {\n                                        setAnimating(true);\n                                        console.log(\"attempting to renew subscription\");\n                                        await submitPaymentInfo();\n                                        await renewSubscription();\n                                        setLoading(true);\n                                    }}\n                                    animating={animating}\n                                />\n                            ) : (\n                                <Paragraph>Enter payment data for renewal</Paragraph>\n                            )}\n                        </>\n                    ) : paymentData.payment_method ? (\n                        <>\n                            <Paragraph alignSelf=\"center\">Your subscription will be automatically renewed on {DateTime.fromHTTP(paymentData.subscription_end_date).toLocaleString(DateTime.DATE_MED)}.</Paragraph>\n                            <Paragraph alignSelf=\"center\">Payment data on file: {paymentData.payment_method.brand} ending in {paymentData.payment_method.last4}</Paragraph>\n                        </>\n                    ): (\n                        <>\n                            <Paragraph alignSelf=\"center\">Your free trial will end on {DateTime.fromHTTP(paymentData.subscription_end_date).toLocaleString(DateTime.DATE_MED)}.</Paragraph>\n                            <Button label=\"Enter payment information\" onClick={() => {setAddCardModalVisible(true)}}/>\n                            {addCardModalVisible ? (\n                                <Layer\n                                    responsive={false}\n                                    onEsc={() => setAddCardModalVisible(false)}\n                                    onClickOutside={() => setAddCardModalVisible(false)}\n                                    animation={false}\n                                >\n                                    <Box width=\"90vw\" pad=\"large\">\n                                        <Box direction=\"row\" justify=\"between\">\n                                            <Paragraph size=\"large\">Enter credit card information</Paragraph>\n                                            <Button icon={<Close />} onClick={() => setAddCardModalVisible(false)}/>\n                                        </Box>\n                                            <Elements stripe={stripePromise}>\n                                                <StripeCardEntry\n                                                    submitText={`Add card (will be charged on ${DateTime.fromHTTP(paymentData.subscription_end_date).toLocaleString(DateTime.DATE_MED)}.)`}\n                                                    clientSecret={paymentData.client_secret}\n                                                    afterSubmitAction={async () => {\n                                                        await loadData();\n                                                        setAddCardModalVisible(false);\n                                                    }}\n                                                    payOnSubmit={false}\n                                                />\n                                            </Elements>\n                                            {/* <Paragraph>stripe element</Paragraph> */}\n                                    </Box>\n                                </Layer>\n                            ) : null}\n                        </>\n                    )\n                    }\n                    <Box direction=\"row\" justify=\"between\">\n                        <Button label=\"Go back\" margin={{vertical: \"small\"}} onClick={() => {history.push(\"/\")}}/>\n                        {\n                            <Button\n                                label={paymentData.payment_method ? \"Cancel subscription\" : \"Stop free trial\"}\n                                margin={{vertical: \"small\"}}\n                                onClick={async () => {\n                                    await cancelSubscription();\n                                    setLoading(true);\n                                }}\n                            />\n                        }\n                    </Box>\n                </Box>\n\n        );\n    };\n}\n\nexport default Payment;","import React from \"react\";\n\nimport { Paragraph } from \"grommet\";\n\nconst FinishOnboarding = () => {\n    return <Paragraph>Finish onboarding over text before continuing.</Paragraph>\n}\n\nexport default FinishOnboarding;","import { Box, Button, Heading, Image, Paragraph, TextInput } from \"grommet\";\nimport { Clear, Favorite, Info } from \"grommet-icons\";\nimport React from \"react\";\nimport { landingPageSignup } from \"../api\";\nimport AnimatingButton from \"../components/AnimatingButton\";\nimport { useHistory } from \"react-router-dom\"\n\n\nconst LandingPage = ({size}) => {\n    console.log(size);\n    const [name, setName] = React.useState(\"\");\n    const [email, setEmail] = React.useState(\"\");\n    const [phoneNumber, setPhoneNumber] = React.useState(\"\");\n    const [freeTrialCode, setFreeTrialCode] = React.useState(\"\");\n    const [loading, setLoading] = React.useState(false);\n    const [submittedForm, setSubmittedForm] = React.useState(false);\n    const history = useHistory();\n\n\n    if (size === \"large\" || size === \"xlarge\") {\n        return (\n            <Box>\n                <Box margin={{horizontal: \"small\"}} direction=\"row\" justify=\"between\">\n                    <Heading size=\"small\">💊 coherence</Heading>\n                    <Box direction=\"row\" align=\"center\">\n                        <Paragraph margin={{right: \"medium\"}}>Already have an account?</Paragraph>\n                        <Button label=\"login\" onClick={() => {history.push(\"/login\")}}/>\n                    </Box>\n                </Box>\n                <Box align=\"center\">\n                    <Box direction=\"row\" justify=\"evenly\" align=\"center\" fill=\"horizontal\">\n                        <Box direction=\"column\" width=\"medium\" margin=\"small\">\n                            <Heading size=\"small\">Peace of mind with your medication.</Heading>\n                            <Paragraph>Your personal medication companion is here at last. No more struggling with annoying alarms. No more wondering whether you've taken a dose or not.</Paragraph>\n                            <Box align=\"center\">\n                                <Button label=\"Try it out!\" primary={true} href=\"#signup\"/>\n                            </Box>\n                        </Box>\n                        <Box width=\"medium\" direction=\"row\" margin=\"small\">\n                            <Image\n                                fit=\"contain\"\n                                src=\"https://uploads-ssl.webflow.com/6033f4ad7e2c0743cd74dfb1/6058b37cab7185d821f3d2df_Coherence%20reminder%20flow-p-800.png\"\n                            />\n                        </Box>\n                    </Box>\n                </Box>\n                <Box background=\"brand\" margin={{top: \"large\"}} align=\"center\">\n                    <Heading size=\"small\" textAlign=\"center\">Here's what makes us different.</Heading>\n                    <Box direction=\"row\" fill=\"horizontal\" justify=\"around\">\n                        <Box direction=\"column\" align=\"center\" margin=\"large\">\n                            <Favorite size=\"large\"/>\n                            <Paragraph textAlign=\"center\">Collaborative</Paragraph>\n                        </Box>\n                        <Box direction=\"column\" align=\"center\" margin=\"large\">\n                            <Clear size=\"large\"/>\n                            <Paragraph textAlign=\"center\">No apps needed</Paragraph>\n                        </Box>\n                        <Box direction=\"column\" align=\"center\" margin=\"large\">\n                            <Info size=\"large\"/>\n                            <Paragraph textAlign=\"center\">Personalized</Paragraph>\n                        </Box>\n                    </Box>\n                </Box>\n                <Box align=\"center\">\n                    <Heading size=\"small\">More than just a reminder.</Heading>\n                </Box>\n                <Box align=\"center\">\n                    <Box width=\"xlarge\">\n                        <Image\n                            alignSelf=\"center\"\n                            width=\"90%\"\n                            src=\"https://i.ibb.co/G0Q0KK0/Slice-3-3.png\"\n                        />\n                    </Box>\n                </Box>\n                <Box background=\"brand\" id=\"signup\" align=\"center\" pad=\"large\">\n                    <Heading size=\"small\" textAlign=\"center\">We can't wait to be a part of your medication journey.</Heading>\n                    <Paragraph textAlign=\"center\">Coherence is available now for $6.99 / month. Sign up below for more information!</Paragraph>\n                    <Box width=\"large\">\n                        <Paragraph>Name</Paragraph>\n                        <TextInput placeholder=\"John\" value={name} onChange={(e) => {setName(e.target.value)}}/>\n                        <Paragraph>Email address</Paragraph>\n                        <TextInput placeholder=\"john@gmail.com\" value={email} onChange={(e) => {setEmail(e.target.value)}}/>\n                        <Paragraph>Phone number</Paragraph>\n                        <TextInput placeholder=\"(123)456-7890\" value={phoneNumber} onChange={(e) => {setPhoneNumber(e.target.value)}}/>\n                        <Paragraph>Free trial code (optional)</Paragraph>\n                        <TextInput value={freeTrialCode} onChange={(e) => {setFreeTrialCode(e.target.value)}}/>\n                        <Box width=\"small\" alignSelf=\"center\" margin={{vertical: \"large\"}}>\n                            <Button label=\"sign up\" primary={true}/>\n                        </Box>\n                    </Box>\n                </Box>\n            </Box>\n        );\n    }\n    if (size === \"medium\") {\n        return (\n            <Box>\n                <Box margin={{horizontal: \"small\"}} direction=\"row\" justify=\"between\">\n                    <Heading size=\"small\">💊 coherence</Heading>\n                    <Box direction=\"row\" align=\"center\">\n                        <Button label=\"login\" onClick={() => {history.push(\"/login\")}}/>\n                    </Box>\n                </Box>\n                <Box align=\"center\">\n                    <Box direction=\"row\" justify=\"evenly\" align=\"center\" fill=\"horizontal\">\n                        <Box direction=\"column\" width=\"medium\" margin=\"small\">\n                            <Heading size=\"small\">Peace of mind with your medication.</Heading>\n                            <Paragraph>Your personal medication companion is here at last. No more struggling with annoying alarms. No more wondering whether you've taken a dose or not.</Paragraph>\n                            <Box align=\"center\">\n                                <Button label=\"Try it out!\" primary={true} href=\"#signup\"/>\n                            </Box>\n                        </Box>\n                        <Box width=\"medium\" direction=\"row\" margin=\"small\">\n                            <Image\n                                fit=\"contain\"\n                                src=\"https://uploads-ssl.webflow.com/6033f4ad7e2c0743cd74dfb1/6058b37cab7185d821f3d2df_Coherence%20reminder%20flow-p-800.png\"\n                            />\n                        </Box>\n                    </Box>\n                </Box>\n                <Box background=\"brand\" margin={{top: \"large\"}} align=\"center\">\n                    <Heading size=\"small\" textAlign=\"center\">Here's what makes us different.</Heading>\n                    <Box direction=\"row\" fill=\"horizontal\" justify=\"around\">\n                        <Box direction=\"column\" align=\"center\" margin=\"large\">\n                            <Favorite size=\"large\"/>\n                            <Paragraph textAlign=\"center\">Collaborative</Paragraph>\n                        </Box>\n                        <Box direction=\"column\" align=\"center\" margin=\"large\">\n                            <Clear size=\"large\"/>\n                            <Paragraph textAlign=\"center\">No apps needed</Paragraph>\n                        </Box>\n                        <Box direction=\"column\" align=\"center\" margin=\"large\">\n                            <Info size=\"large\"/>\n                            <Paragraph textAlign=\"center\">Personalized</Paragraph>\n                        </Box>\n                    </Box>\n                </Box>\n                <Box align=\"center\">\n                    <Heading size=\"small\">More than just a reminder.</Heading>\n                </Box>\n                <Box align=\"center\">\n                    <Box width=\"xlarge\">\n                        <Image\n                            alignSelf=\"center\"\n                            width=\"90%\"\n                            src=\"https://i.ibb.co/G0Q0KK0/Slice-3-3.png\"\n                        />\n                    </Box>\n                </Box>\n                <Box background=\"brand\" id=\"signup\" align=\"center\" pad=\"large\">\n                    <Heading size=\"small\" textAlign=\"center\">We can't wait to be a part of your medication journey.</Heading>\n                    <Paragraph textAlign=\"center\">Coherence is available now for $6.99 / month. Sign up below for more information!</Paragraph>\n                    <Box width=\"large\">\n                        <Paragraph>Name</Paragraph>\n                        <TextInput placeholder=\"Kari\" value={name} onChange={(e) => {setName(e.target.value)}}/>\n                        <Paragraph>Email address</Paragraph>\n                        <TextInput placeholder=\"kari@gmail.com\" value={email} onChange={(e) => {setEmail(e.target.value)}}/>\n                        <Paragraph>Phone number</Paragraph>\n                        <TextInput placeholder=\"(123) 456-7890\" value={phoneNumber} onChange={(e) => {setPhoneNumber(e.target.value)}}/>\n                        <Paragraph>Free trial code (optional)</Paragraph>\n                        <TextInput value={freeTrialCode} onChange={(e) => {setFreeTrialCode(e.target.value)}}/>\n                        <Box width=\"small\" alignSelf=\"center\" margin={{vertical: \"large\"}}>\n                            <Button label=\"sign up\" primary={true}/>\n                        </Box>\n                    </Box>\n                </Box>\n                <Box direction=\"row\">\n                    <Heading>coherence</Heading>\n                </Box>\n            </Box>\n        );\n    }\n    if (size === \"small\" || size === \"xsmall\") {\n        return (\n            <Box>\n                <Box margin={{horizontal: \"large\"}} direction=\"row\" justify=\"between\">\n                    <Heading size=\"small\">💊 coherence</Heading>\n                    <Box direction=\"row\" align=\"center\">\n                        <Button label=\"login\" onClick={() => {history.push(\"/login\")}}/>\n                    </Box>\n                </Box>\n                <Box align=\"center\">\n                    <Box direction=\"column\" align=\"center\" fill=\"horizontal\">\n                        <Box direction=\"column\" margin=\"large\">\n                            <Heading>Peace of mind with your medication.</Heading>\n                            <Paragraph>Your personal medication companion is here at last. No more struggling with annoying alarms. No more wondering whether you've taken a dose or not.</Paragraph>\n                            <Box align=\"center\">\n                                <Button label=\"Try it out!\" primary={true} href=\"#signup\"/>\n                            </Box>\n                        </Box>\n                        <Box direction=\"row\" width=\"90%\" margin={{bottom: \"medium\"}}>\n                            <Image\n                                width=\"100%\"\n                                height=\"100%\"\n                                src=\"https://uploads-ssl.webflow.com/6033f4ad7e2c0743cd74dfb1/6058b37cab7185d821f3d2df_Coherence%20reminder%20flow-p-800.png\"\n                            />\n                        </Box>\n                    </Box>\n                </Box>\n                <Box background=\"brand\">\n                    <Heading size=\"medium\" textAlign=\"center\">Here's what makes us different.</Heading>\n                    <Box direction=\"row\">\n                        <Box direction=\"column\" align=\"center\" margin=\"large\">\n                            <Favorite size=\"large\"/>\n                            <Paragraph textAlign=\"center\" size=\"small\">Collaborative</Paragraph>\n                        </Box>\n                        <Box direction=\"column\" align=\"center\" margin=\"large\">\n                            <Clear size=\"large\"/>\n                            <Paragraph textAlign=\"center\" size=\"small\">No apps needed</Paragraph>\n                        </Box>\n                        <Box direction=\"column\" align=\"center\" margin=\"large\">\n                            <Info size=\"large\"/>\n                            <Paragraph textAlign=\"center\" size=\"small\">Personalized</Paragraph>\n                        </Box>\n                    </Box>\n                </Box>\n                <Box align=\"center\" margin={{horizontal: \"small\"}}>\n                    <Heading textAlign=\"center\">More than just a reminder.</Heading>\n                </Box>\n                <Box align=\"center\">\n                    <Box width=\"xlarge\">\n                        <Image\n                            alignSelf=\"center\"\n                            width=\"90%\"\n                            src=\"https://i.ibb.co/G0Q0KK0/Slice-3-3.png\"\n                        />\n                    </Box>\n                </Box>\n                <Box background=\"brand\" id=\"signup\">\n                    <Box align=\"center\" margin=\"small\">\n                        <Heading size=\"small\" textAlign=\"center\">We can't wait to be a part of your medication journey.</Heading>\n                        <Paragraph textAlign=\"center\">Coherence is available now for $6.99 / month. Sign up below for more information!</Paragraph>\n                        {submittedForm ?\n                            <Box width=\"large\" background=\"white\" round={true} pad=\"large\">\n                                <Paragraph textAlign=\"center\">We've received your submission and will reach out to you shortly to complete signup. We can't wait for you to try Coherence!</Paragraph>\n                            </Box> :\n                            <Box width=\"large\">\n                                <Paragraph>Name</Paragraph>\n                                <TextInput placeholder=\"John\" value={name} onChange={(e) => {setName(e.target.value)}}/>\n                                <Paragraph>Email address</Paragraph>\n                                <TextInput placeholder=\"john@gmail.com\" value={email} onChange={(e) => {setEmail(e.target.value)}}/>\n                                <Paragraph>Phone number</Paragraph>\n                                <TextInput placeholder=\"(123)456-7890\" value={phoneNumber} onChange={(e) => {setPhoneNumber(e.target.value)}}/>\n                                <Paragraph>Free trial code (optional)</Paragraph>\n                                <TextInput value={freeTrialCode} onChange={(e) => {setFreeTrialCode(e.target.value)}}/>\n                                <Box width=\"small\" alignSelf=\"center\" margin={{vertical: \"large\"}}>\n                                    <AnimatingButton\n                                        label={\n                                            freeTrialCode.toLowerCase() === \"vpc30\" ? \"sign up for 30-day free trial\" : freeTrialCode ? \"Invalid free trial code\" : \"sign up\"\n                                        }\n                                        primary={true}\n                                        disabled={freeTrialCode !== \"\" && freeTrialCode.toLowerCase() !== \"vpc30\"}\n                                        color={freeTrialCode && freeTrialCode.toLowerCase() !== \"vpc30\" ? \"status-error\" : \"status-ok\"}\n                                        animating={loading}\n                                        onClick={async () => {\n                                            setLoading(true);\n                                            await landingPageSignup(name, email, phoneNumber, freeTrialCode);\n                                            setLoading(false);\n                                            setSubmittedForm(true);\n                                        }}\n                                    />\n                                </Box>\n                            </Box>\n                        }\n                    </Box>\n                </Box>\n            </Box>\n        );\n    }\n\n}\n\nexport default LandingPage;","import './App.css';\nimport Home from './pages/Home';\nimport Intro from './pages/Intro';\nimport Payment from './pages/Payment';\nimport FinishOnboarding from './pages/FinishOnboarding';\n\nimport { Route, Switch, BrowserRouter } from 'react-router-dom';\nimport { ResponsiveContext } from \"grommet\";\nimport LandingPage from './pages/LandingPage';\n\n\nconst App = () => {\n  return (\n    <BrowserRouter>\n        <Switch>\n            <Route exact path={'/'} render={() => <Home />}/>\n            <Route exact path={'/login'} render={() => <Intro />}/>\n            <Route exact path={'/payment'} render={() => <Payment />}/>\n            <Route exact path={'/finishOnboarding'} render={() => <FinishOnboarding />}/>\n            <Route exact path={'/landing'} render={() => (\n              <ResponsiveContext.Consumer>\n                {(size) => {\n                  return <LandingPage size={size}/>\n                }}\n              </ResponsiveContext.Consumer>\n            )}/>\n        </Switch>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { CookiesProvider } from 'react-cookie';\nimport { Grommet } from \"grommet\";\n\nconst grommetTheme = {\n  global: {\n    colors: {\n      brand: \"#002864\",\n      text: {light: \"#002864\"},\n      paragraph: {light: \"#002864\"},\n      background: \"#FFF\"\n    },\n    breakpoints: {\n      xsmall: {\n        value: 375,\n      },\n      small: {\n        value: 400,\n      },\n      medium: {\n        value: 768,\n      },\n      large: {\n        value: 1024,\n      },\n      xlarge: {\n        value: 1366,\n      },\n    },\n  },\n  spinner: {\n    container: {\n      color: {\n        light: \"#002864\",\n        dark: \"FFF\"\n      }\n    }\n  }\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    <CookiesProvider>\n      <Grommet theme={grommetTheme} themeMode=\"light\">\n        <App />\n      </Grommet>\n    </CookiesProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}